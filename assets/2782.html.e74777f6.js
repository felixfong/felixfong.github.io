import{e as s}from"./app.dbf5d933.js";import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";const a={},e=s(`<p>fileinfo \u8FD9\u4E2A\u6269\u5C55\u662F php \u81EA\u5E26\u7684\uFF0C\u4F46\u662F\u4F7F\u7528 lnmp \u4E00\u952E\u5B89\u88C5\u811A\u672C\u90E8\u7F72\u7684\u65F6\u5019\u5E76\u6CA1\u6709\u542F\u7528\u8FD9\u4E2A\u6269\u5C55\uFF0C\u4ECA\u5929\u60F3\u8981\u90E8\u7F72\u4E00\u4E2A\u56FE\u5E8A\u670D\u52A1\u9700\u8981\u5B89\u88C5\u8FD9\u4E2A\u6269\u5C55\u3002</p><p>\u5728\u7F51\u4E0A\u770B\u4E86\u4E0D\u5C11\u7684\u6587\u7AE0\uFF0C\u57FA\u672C\u4E0A\u90FD\u6CA1\u6709\u6548\u679C\u3002\u8FD9\u91CC\u8BB0\u5F55\u4E0B\u3002</p><p>\u5148\u6765\u770B\u4E00\u4E0B\u662F\u4EC0\u4E48\u72B6\u6001\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@eryajf ~<span class="token punctuation">]</span><span class="token variable">$php</span> -i <span class="token operator">|</span><span class="token function">grep</span> fileinfo
Configure Command <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token string">&#39;./configure&#39;</span>  <span class="token string">&#39;--prefix=/usr/local/php&#39;</span> <span class="token string">&#39;--with-config-file-path=/usr/local/php/etc&#39;</span> <span class="token string">&#39;--with-config-file-scan-dir=/usr/local/php/conf.d&#39;</span> <span class="token string">&#39;--enable-fpm&#39;</span> <span class="token string">&#39;--with-fpm-user=www&#39;</span> <span class="token string">&#39;--with-fpm-group=www&#39;</span> <span class="token string">&#39;--enable-mysqlnd&#39;</span> <span class="token string">&#39;--with-mysqli=mysqlnd&#39;</span> <span class="token string">&#39;--with-pdo-mysql=mysqlnd&#39;</span> <span class="token string">&#39;--with-iconv-dir&#39;</span> <span class="token string">&#39;--with-freetype-dir=/usr/local/freetype&#39;</span> <span class="token string">&#39;--with-jpeg-dir&#39;</span> <span class="token string">&#39;--with-png-dir&#39;</span> <span class="token string">&#39;--with-zlib&#39;</span> <span class="token string">&#39;--with-libxml-dir=/usr&#39;</span> <span class="token string">&#39;--enable-xml&#39;</span> <span class="token string">&#39;--disable-rpath&#39;</span> <span class="token string">&#39;--enable-bcmath&#39;</span> <span class="token string">&#39;--enable-shmop&#39;</span> <span class="token string">&#39;--enable-sysvsem&#39;</span> <span class="token string">&#39;--enable-inline-optimization&#39;</span> <span class="token string">&#39;--with-curl&#39;</span> <span class="token string">&#39;--enable-mbregex&#39;</span> <span class="token string">&#39;--enable-mbstring&#39;</span> <span class="token string">&#39;--enable-intl&#39;</span> <span class="token string">&#39;--with-mcrypt&#39;</span> <span class="token string">&#39;--enable-ftp&#39;</span> <span class="token string">&#39;--with-gd&#39;</span> <span class="token string">&#39;--enable-gd-native-ttf&#39;</span> <span class="token string">&#39;--with-openssl&#39;</span> <span class="token string">&#39;--with-mhash&#39;</span> <span class="token string">&#39;--enable-pcntl&#39;</span> <span class="token string">&#39;--enable-sockets&#39;</span> <span class="token string">&#39;--with-xmlrpc&#39;</span> <span class="token string">&#39;--enable-zip&#39;</span> <span class="token string">&#39;--enable-soap&#39;</span> <span class="token string">&#39;--with-gettext&#39;</span> <span class="token string">&#39;--disable-fileinfo&#39;</span> <span class="token string">&#39;--enable-opcache&#39;</span> <span class="token string">&#39;--with-xsl&#39;</span>
fileinfo
fileinfo support <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u7136\u540E\u53BB\u5230\u6E90\u7801\u76EE\u5F55\u8FDB\u884C\u91CD\u65B0\u7F16\u8BD1\u6DFB\u52A0\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@eryajf ~<span class="token punctuation">]</span><span class="token variable">$cd</span> /mnt/lnmp1.4-full/src/php-7.1.5/ext/fileinfo/
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8FD9\u65F6\u8FD9\u4E2A\u76EE\u5F55\u662F\u65E0\u6CD5\u76F4\u63A5\u7F16\u8BD1\u7684\uFF0C\u9700\u8981\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u751F\u6210\u7F16\u8BD1\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@eryajf fileinfo<span class="token punctuation">]</span><span class="token variable">$phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20160303</span>
Zend Module Api No:      <span class="token number">20160303</span>
Zend Extension Api No:   <span class="token number">320160303</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u7136\u540E\u8FDB\u884C\u7F16\u8BD1\u5373\u53EF\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure --with-php-config<span class="token operator">=</span>/usr/local/php/bin/php-config --enable-fileinfo
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5982\u679C\u6267\u884C\u65E0\u8BEF\uFF0C\u5219\u4F1A\u5728\u6700\u540E\u8F93\u51FA\u4E00\u4E2A\u76EE\u5F55\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@eryajf min-wiki<span class="token punctuation">]</span><span class="token variable">$ls</span> /usr/local/php/lib/php/extensions/no-debug-non-zts-20160303
fileinfo.so  opcache.a  opcache.so
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\u8FD9\u91CC\u5DF2\u7ECF\u751F\u6210\u4E86\u9700\u8981\u7684 so \u6587\u4EF6\u3002</p><p>\u63A5\u7740\u914D\u7F6E<code>php.ini</code>\u8FDB\u884C\u5F15\u7528\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>extension <span class="token operator">=</span> <span class="token string">&quot;/usr/local/php/lib/php/extensions/no-debug-non-zts-20160303/fileinfo.so&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5C06\u5982\u4E0A\u5185\u5BB9\u6DFB\u52A0\u5728\u6587\u4EF6\u5F53\u4E2D\u3002\u7136\u540E\u91CD\u542F\u5373\u53EF\u3002</p><p><img src="http://t.eryajf.net/imgs/2021/09/758a1ffb0b4614d5.jpg" alt="image"></p><p>\u4E0D\u8FC7\u5728\u91CD\u542F\u7684\u65F6\u5019\u53EF\u80FD\u4F1A\u9047\u5230\u4E0B\u8FB9\u7684\u62A5\u9519\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>NOTICE: PHP message: PHP Warning: PHP Startup: Invalid library <span class="token punctuation">(</span>maybe not a PHP library<span class="token punctuation">)</span> \u2018fileinfo.so\u2019 <span class="token keyword">in</span> Unknown on line <span class="token number">0</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u89E3\u51B3\u529E\u6CD5\u662F\u56DE\u5230\u4E0A\u8FB9\u6DFB\u52A0\u4E00\u6761\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">rm</span> -rf /usr/local/php/lib/php/extensions/no-debug-non-zts-20160303/fileinfo.so
$ <span class="token function">make</span> clean
$ ./configure --with-php-config<span class="token operator">=</span>/usr/local/php/bin/php-config --enable-fileinfo
$ <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u7136\u540E\u518D\u91CD\u542F\u5C31\u80FD\u591F\u770B\u5230\u6DFB\u52A0\u6210\u529F\u4E86\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@eryajf fileinfo<span class="token punctuation">]</span><span class="token variable">$php</span> -m <span class="token operator">|</span><span class="token function">grep</span> fileinfo
fileinfo
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,23);function p(l,i){return e}var r=n(a,[["render",p]]);export{r as default};

import{e as n}from"./app.dbf5d933.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},e=n(`<p>\u672C\u6587\u4ECB\u7ECD MongoDB \u7684\u65E5\u5E38\u589E\u5220\u6539\u67E5\u547D\u4EE4\u64CD\u4F5C\u3002</p><p>Mongodb \u4E2D\u5173\u952E\u5B57\u79CD\u7C7B\uFF1A</p><ul><li>db\uFF08\u6570\u636E\u5E93\u5B9E\u4F8B\u7EA7\u522B\uFF09</li><li>db \u672C\u8EAB</li><li>db.connection \u6570\u636E\u5E93\u4E0B\u7684\u96C6\u5408\u4FE1\u606F</li><li>db.collection.xxx(</li><li>rs\uFF08\u590D\u5236\u96C6\u7EA7\u522B\uFF09</li><li>sh\uFF08\u5206\u7247\u7EA7\u522B\uFF09</li></ul><h2 id="_1-\u67E5\u8BE2\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_1-\u67E5\u8BE2\u64CD\u4F5C" aria-hidden="true">#</a> 1\uFF0C\u67E5\u8BE2\u64CD\u4F5C</h2><p>\u6CE8\u610F\uFF0C\u4EE5\u4E0B\u6240\u6709\u64CD\u4F5C\uFF0C\u90FD\u662F\u57FA\u4E8E\u7528\u6237\u8BA4\u8BC1\u5173\u95ED\u7684\u914D\u7F6E\u6765\u8FDB\u884C\u7684\uFF0C\u914D\u7F6E\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@mongodb bin<span class="token punctuation">]</span><span class="token variable">$cat</span> mongodb.conf
<span class="token comment">#\u6570\u636E\u5B58\u50A8\u76EE\u5F55</span>
<span class="token assign-left variable">dbpath</span><span class="token operator">=</span>/usr/local/mongodb/data/db
<span class="token comment">#\u65E5\u5FD7\u6587\u4EF6\u76EE\u5F55</span>
<span class="token assign-left variable">logpath</span><span class="token operator">=</span>/usr/local/mongodb/logs/mongodb.log
<span class="token comment">#\u540E\u53F0\u8FD0\u884C</span>
<span class="token assign-left variable">fork</span><span class="token operator">=</span>true
<span class="token assign-left variable">auth</span><span class="token operator">=</span>false
<span class="token assign-left variable">bind_ip</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0
<span class="token punctuation">[</span>root@mongodb bin<span class="token punctuation">]</span><span class="token variable">$systemctl</span> restart mongod
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5728\u5BA2\u6237\u7AEF\u6307\u5B9A\u6570\u636E\u5E93\u8FDB\u884C\u8FDE\u63A5\uFF1A\uFF08\u9ED8\u8BA4\u8FDE\u63A5\u672C\u673A test \u6570\u636E\u5E93\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@mongodb bin<span class="token punctuation">]</span><span class="token variable">$mongo</span>
MongoDB shell version v4.0.10
connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName<span class="token operator">=</span>mongodb
Implicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;e083a0dd-61a2-4e02-8e48-20ddf70dc701&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version: <span class="token number">4.0</span>.10
Server has startup warnings:
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span> ** WARNING: You are running this process as the root user, <span class="token function">which</span> is not recommended.
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span> ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is <span class="token string">&#39;always&#39;</span><span class="token builtin class-name">.</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span> **        We suggest setting it to <span class="token string">&#39;never&#39;</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span> ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is <span class="token string">&#39;always&#39;</span><span class="token builtin class-name">.</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span> **        We suggest setting it to <span class="token string">&#39;never&#39;</span>
<span class="token number">2019</span>-07-03T13:58:46.421+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span>
---
Enable MongoDB&#39;s <span class="token function">free</span> cloud-based monitoring service, <span class="token function">which</span> will <span class="token keyword">then</span> receive and display
metrics about your deployment <span class="token punctuation">(</span>disk utilization, CPU, operation statistics, etc<span class="token punctuation">)</span>.
The monitoring data will be available on a MongoDB website with a unique URL accessible to you
and anyone you share the URL with. MongoDB may use this information to <span class="token function">make</span> product
improvements and to suggest MongoDB products and deployment options to you.
To <span class="token builtin class-name">enable</span> <span class="token function">free</span> monitoring, run the following command: db.enableFreeMonitoring<span class="token punctuation">(</span><span class="token punctuation">)</span>
To permanently disable this reminder, run the following command: db.disableFreeMonitoring<span class="token punctuation">(</span><span class="token punctuation">)</span>
---
<span class="token operator">&gt;</span> db
<span class="token builtin class-name">test</span>
<span class="token operator">&gt;</span> db.disableFreeMonitoring<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#\u9996\u5148\u5173\u95ED\u4E0A\u8FB9\u6700\u540E\u4E00\u53E5\u63D0\u793A\u7684</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>\u89E3\u51B3\u4E00\u4E0B\u8FDB\u5165\u4E4B\u540E\u7684\u70E6\u4EBA\u63D0\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@mongodb bin<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> nerver <span class="token operator">&gt;</span> /sys/kernel/mm/transparent_hugepage/defrag
<span class="token punctuation">[</span>root@mongodb bin<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> never <span class="token operator">&gt;</span> /sys/kernel/mm/transparent_hugepage/enabled
<span class="token punctuation">[</span>root@mongodb bin<span class="token punctuation">]</span>$ systemctl restart mongod
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u7136\u540E\u91CD\u542F\u4E00\u4E0B\u5E94\u7528\uFF0C\u4E3A\u4E86\u907F\u514D\u670D\u52A1\u5668\u91CD\u542F\u5931\u6548\uFF0C\u5199\u5165\u5F00\u542F\u81EA\u52A8\u6267\u884C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;&gt;</span> /etc/rc.local <span class="token operator">&lt;&lt;</span><span class="token string">&#39;EOF&#39;
if test -f /sys/kernel/mm/transparent_hugepage/enabled; then
  echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled
fi
if test -f /sys/kernel/mm/transparent_hugepage/defrag; then
   echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag
fi
EOF</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u518D\u6B21\u8FDB\u5165\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token variable">$mongo</span>
MongoDB shell version v4.0.10
connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName<span class="token operator">=</span>mongodb
Implicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;e9a0ecdb-e17a-4b0a-b0b6-00cbddabe3f7&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version: <span class="token number">4.0</span>.10
Server has startup warnings:
<span class="token number">2019</span>-07-04T00:11:48.841+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span> ** WARNING: You are running this process as the root user, <span class="token function">which</span> is not recommended.
<span class="token number">2019</span>-07-04T00:11:48.841+0800 I CONTROL  <span class="token punctuation">[</span>initandlisten<span class="token punctuation">]</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="http://t.eryajf.net/imgs/2021/09/b99aa0140a28eddb.jpg" alt="image"></p><h3 id="_1-\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#_1-\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u7248\u672C" aria-hidden="true">#</a> 1\uFF0C\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u7248\u672C</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.version<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">4.0</span>.10
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-\u5207\u6362\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_2-\u5207\u6362\u6570\u636E\u5E93" aria-hidden="true">#</a> 2\uFF0C\u5207\u6362\u6570\u636E\u5E93</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> use admin
switched to db admin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-\u663E\u793A\u5F53\u524D\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_3-\u663E\u793A\u5F53\u524D\u6570\u636E\u5E93" aria-hidden="true">#</a> 3\uFF0C\u663E\u793A\u5F53\u524D\u6570\u636E\u5E93</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db
admin
<span class="token operator">&gt;</span> db.getName<span class="token punctuation">(</span><span class="token punctuation">)</span>
admin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-\u67E5\u8BE2\u6240\u6709\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_4-\u67E5\u8BE2\u6240\u6709\u6570\u636E\u5E93" aria-hidden="true">#</a> 4\uFF0C\u67E5\u8BE2\u6240\u6709\u6570\u636E\u5E93</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
<span class="token operator">&gt;</span> show databases
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5-\u67E5\u770B-admin-\u6570\u636E\u5E93\u5F53\u524D\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_5-\u67E5\u770B-admin-\u6570\u636E\u5E93\u5F53\u524D\u72B6\u6001" aria-hidden="true">#</a> 5\uFF0C\u67E5\u770B admin \u6570\u636E\u5E93\u5F53\u524D\u72B6\u6001</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> use admin
switched to db admin
<span class="token operator">&gt;</span> db.<span class="token function-name function">stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;db&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;admin&quot;</span>,
    <span class="token string">&quot;collections&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;views&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;objects&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;avgObjSize&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">59</span>,
    <span class="token string">&quot;dataSize&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">59</span>,
    <span class="token string">&quot;storageSize&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">16384</span>,
    <span class="token string">&quot;numExtents&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;indexes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;indexSize&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">16384</span>,
    <span class="token string">&quot;fsUsedSize&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">13630574592</span>,
    <span class="token string">&quot;fsTotalSize&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">210031038464</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_6-\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u7684\u8FDE\u63A5\u673A\u5668\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#_6-\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u7684\u8FDE\u63A5\u673A\u5668\u5730\u5740" aria-hidden="true">#</a> 6\uFF0C\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u7684\u8FDE\u63A5\u673A\u5668\u5730\u5740</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.getMongo<span class="token punctuation">(</span><span class="token punctuation">)</span>
connection to <span class="token number">127.0</span>.0.1:27017
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_2-\u6570\u636E\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#_2-\u6570\u636E\u7BA1\u7406" aria-hidden="true">#</a> 2\uFF0C\u6570\u636E\u7BA1\u7406</h2><h3 id="_1-\u521B\u5EFA\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-\u521B\u5EFA\u6570\u636E\u5E93" aria-hidden="true">#</a> 1\uFF0C\u521B\u5EFA\u6570\u636E\u5E93</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> use eryajf
switched to db eryajf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p><p>\u5F53 use \u7684\u65F6\u5019\uFF0C\u7CFB\u7EDF\u5C31\u4F1A\u81EA\u52A8\u521B\u5EFA\u4E00\u4E2A\u6570\u636E\u5E93\u3002</p><p>\u5982\u679C use \u4E4B\u540E\u6CA1\u6709\u521B\u5EFA\u4EFB\u4F55\u96C6\u5408\u3002\u7CFB\u7EDF\u5C31\u4F1A\u5220\u9664\u8FD9\u4E2A\u6570\u636E\u5E93\u3002</p><h3 id="_2-\u5220\u9664\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_2-\u5220\u9664\u6570\u636E\u5E93" aria-hidden="true">#</a> 2\uFF0C\u5220\u9664\u6570\u636E\u5E93</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db
eryajf
<span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
eryajf  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
<span class="token operator">&gt;</span> db.<span class="token function-name function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;dropped&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;eryajf&quot;</span>, <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p><p>\u5220\u9664\u6570\u636E\u5E93\uFF1A\u5982\u679C\u6CA1\u6709\u9009\u62E9\u4EFB\u4F55\u6570\u636E\u5E93\uFF0C\u4F1A\u5220\u9664\u9ED8\u8BA4\u7684 test \u6570\u636E\u5E93</p><h3 id="_3-\u521B\u5EFA\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#_3-\u521B\u5EFA\u96C6\u5408" aria-hidden="true">#</a> 3\uFF0C\u521B\u5EFA\u96C6\u5408</h3><ul><li>\u65B9\u6CD5\u4E00</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> use eryajf
switched to db eryajf
<span class="token operator">&gt;</span> db.createCollection<span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.createCollection<span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>\u67E5\u770B\u5F53\u524D\u6570\u636E\u4E0B\u7684\u6240\u6709\u96C6\u5408</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> show collections
a
b
<span class="token operator">&gt;</span> db.getCollectionNames<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token string">&quot;a&quot;</span>, <span class="token string">&quot;b&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>\u65B9\u6CD5\u4E8C</p><p>\u5F53\u63D2\u5165\u4E00\u4E2A\u6587\u6863\u7684\u65F6\u5019\uFF0C\u4E00\u4E2A\u96C6\u5408\u5C31\u4F1A\u81EA\u52A8\u521B\u5EFA\u3002</p></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.c.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token string">&#39;eryajf&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.c.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>url:<span class="token string">&#39;http://eryajf.net&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-\u67E5\u770B\u521B\u5EFA\u7684\u5408\u96C6" tabindex="-1"><a class="header-anchor" href="#_4-\u67E5\u770B\u521B\u5EFA\u7684\u5408\u96C6" aria-hidden="true">#</a> 4\uFF0C\u67E5\u770B\u521B\u5EFA\u7684\u5408\u96C6</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.getCollectionNames<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token string">&quot;a&quot;</span>, <span class="token string">&quot;b&quot;</span>, <span class="token string">&quot;c&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\u67E5\u770B\u5408\u96C6\u91CC\u7684\u5185\u5BB9</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.c.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5d1c48e5e6a475def02382cc&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;eryajf&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5d1c48f9e6a475def02382cd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;url&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;http://eryajf.net&quot;</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-\u91CD\u547D\u540D\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#_5-\u91CD\u547D\u540D\u96C6\u5408" aria-hidden="true">#</a> 5\uFF0C\u91CD\u547D\u540D\u96C6\u5408</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.c.renameCollection<span class="token punctuation">(</span><span class="token string">&quot;eryajf&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.getCollectionNames<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token string">&quot;a&quot;</span>, <span class="token string">&quot;b&quot;</span>, <span class="token string">&quot;eryajf&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-\u5220\u9664\u5408\u96C6" tabindex="-1"><a class="header-anchor" href="#_6-\u5220\u9664\u5408\u96C6" aria-hidden="true">#</a> 6\uFF0C\u5220\u9664\u5408\u96C6</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.a.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">true</span>
<span class="token operator">&gt;</span> db.getCollectionNames<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token string">&quot;b&quot;</span>, <span class="token string">&quot;eryajf&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_7-\u63D2\u5165-1w-\u884C\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_7-\u63D2\u5165-1w-\u884C\u6570\u636E" aria-hidden="true">#</a> 7\uFF0C\u63D2\u5165 1w \u884C\u6570\u636E</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> for<span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">{</span> db.log.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;uid&quot;</span>:i,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mongodb&quot;</span>,<span class="token string">&quot;age&quot;</span>:6,<span class="token string">&quot;date&quot;</span>:new Date<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u67E5\u8BE2\u96C6\u5408\u4E2D\u7684\u67E5\u8BE2\u6240\u6709\u8BB0\u5F55</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.log.find<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u6CE8\uFF1A\u9ED8\u8BA4\u6BCF\u9875\u663E\u793A 20 \u6761\u8BB0\u5F55\uFF0C\u5F53\u663E\u793A\u4E0D\u4E0B\u7684\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u7528 it \u8FED\u4EE3\u547D\u4EE4\u67E5\u8BE2\u4E0B\u4E00\u9875\u6570\u636E\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> DBQuery.shellBatchSize<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">;</span>    <span class="token comment"># \u6BCF\u9875\u663E\u793A50\u6761\u8BB0\u5F55</span>
<span class="token operator">&gt;</span> db.log.findOne<span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token comment"># \u67E5\u770B\u7B2C1\u6761\u8BB0\u5F55</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5d1c4963e6a475def02382ce&quot;</span><span class="token punctuation">)</span>,
    <span class="token string">&quot;uid&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;mongodb&quot;</span>,
    <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">6</span>,
    <span class="token string">&quot;date&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2019-07-03T06:21:23.125Z&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.log.count<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># \u67E5\u8BE2\u603B\u7684\u8BB0\u5F55\u6570</span>
<span class="token number">10000</span>
<span class="token operator">&gt;</span> db.log.find<span class="token punctuation">(</span><span class="token punctuation">{</span>uid:1000<span class="token punctuation">}</span><span class="token punctuation">)</span>       <span class="token comment"># \u67E5\u8BE2UUID\u4E3A1000\u7684\u6570\u636E</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5d1c4963e6a475def02386b6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;uid&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1000</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;mongodb&quot;</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">6</span>, <span class="token string">&quot;date&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2019-07-03T06:21:23.529Z&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u5220\u9664\u96C6\u5408\u4E2D\u7684\u8BB0\u5F55\u6570</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>  db.log.distinct<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>      <span class="token comment">#  \u67E5\u8BE2\u53BB\u6389\u5F53\u524D\u96C6\u5408\u4E2D\u67D0\u5217\u7684\u91CD\u590D\u6570\u636E</span>
<span class="token punctuation">[</span> <span class="token string">&quot;mongodb&quot;</span> <span class="token punctuation">]</span>
<span class="token operator">&gt;</span> db.log.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>             <span class="token comment">#  \u5220\u9664\u96C6\u5408\u4E2D\u6240\u6709\u8BB0\u5F55</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">10000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  
<span class="token operator">&gt;</span> db.log.distinct<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u67E5\u770B\u96C6\u5408\u5B58\u50A8\u4FE1\u606F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.log.stats<span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment"># \u67E5\u770B\u6570\u636E\u72B6\u6001</span>
<span class="token operator">&gt;</span> db.log.dataSize<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># \u96C6\u5408\u4E2D\u6570\u636E\u7684\u539F\u59CB\u5927\u5C0F</span>
<span class="token operator">&gt;</span> db.log.totalIndexSize<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># \u96C6\u5408\u4E2D\u7D22\u5F15\u6570\u636E\u7684\u539F\u59CB\u5927\u5C0F</span>
<span class="token operator">&gt;</span> db.log.totalSize<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># \u96C6\u5408\u4E2D\u7D22\u5F15+\u6570\u636E\u538B\u7F29\u5B58\u50A8\u4E4B\u540E\u7684\u5927\u5C0F</span>
<span class="token operator">&gt;</span> db.log.storageSize<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># \u96C6\u5408\u4E2D\u6570\u636E\u538B\u7F29\u5B58\u50A8\u7684\u5927\u5C0F</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u53C2\u8003\uFF1Ahttp://t.cn/AiOcP9Cy</p>`,63);function p(t,o){return e}var i=s(a,[["render",p]]);export{i as default};

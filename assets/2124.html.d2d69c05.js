import{e as n}from"./app.dbf5d933.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},e=n(`<p>\u5B98\u7F51\u7684\u4ECB\u7ECD\u5730\u5740\uFF1Ahttps://kubernetes.io/docs/concepts/workloads/controllers/deployment/</p><p>\u4E00\u4E2A\u90E8\u7F72\u63A7\u5236\u5668\u63D0\u4F9B\u58F0\u660E\u66F4\u65B0 pods \u548C ReplicaSets\u3002</p><p>\u60A8\u5728 Deployment \u5BF9\u8C61\u4E2D\u63CF\u8FF0\u4E86\u6240\u9700\u7684\u72B6\u6001\uFF0CDeployment \u63A7\u5236\u5668\u4EE5\u53D7\u63A7\u901F\u7387\u5C06\u5B9E\u9645\u72B6\u6001\u66F4\u6539\u4E3A\u6240\u9700\u72B6\u6001\u3002\u60A8\u53EF\u4EE5\u5B9A\u4E49 \u201C\u90E8\u7F72\u201D \u4EE5\u521B\u5EFA\u65B0\u7684 ReplicaSet\uFF0C\u6216\u8005\u5220\u9664\u73B0\u6709\u7684\u90E8\u7F72\u5E76\u4F7F\u7528\u65B0\u7684\u90E8\u7F72\u91C7\u7528\u6240\u6709\u8D44\u6E90\u3002</p><p>\u6CE8\u610F\uFF1A\u60A8\u4E0D\u5E94\u7BA1\u7406\u90E8\u7F72\u6240\u62E5\u6709\u7684 ReplicaSet\u3002\u5E94\u8BE5\u901A\u8FC7\u64CD\u4F5C Deployment \u5BF9\u8C61\u6765\u6DB5\u76D6\u6240\u6709\u7528\u4F8B\u3002\u5982\u679C\u60A8\u7684\u7528\u4F8B\u672A\u5728\u4E0B\u9762\u4ECB\u7ECD\uFF0C\u8BF7\u8003\u8651\u5728\u4E3B Kubernetes \u5B58\u50A8\u5E93\u4E2D\u6253\u5F00\u4E00\u4E2A\u95EE\u9898\u3002</p><p>\u540C\u6837\uFF0C\u6211\u4EEC\u9996\u5148\u6765\u770B\u4E00\u4E2A\u5BF9\u5E94\u7C7B\u578B\u7684 yaml \u6587\u4EF6\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span>$cat deployment_nginx.yml
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>  <span class="token comment">#replicas\u6307\u7684\u662Freplicaset\uFF0C\u5B9A\u4E49\u4E863\u4E2A\u6570\u76EE\u3002</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.12.2 <span class="token comment">#\u5B9A\u4E49\u955C\u50CF\uFF0C\u8FD9\u4E2A\u5730\u65B9\u968F\u4FBF\u6307\u5B9A\u4E86\u4E00\u4E2A\u7248\u672C1.12.2</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>\u63A5\u4E0B\u6765\u521B\u5EFA\u4E00\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> create -f deployment_nginx.yml
deployment.apps <span class="token string">&quot;nginx-deployment&quot;</span> created
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4F7F\u7528 deployments \u4E4B\u540E\uFF0C\u7BA1\u7406\u65B9\u5F0F\u4E5F\u968F\u4E4B\u53D8\u5316\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>            <span class="token number">3</span>           7s
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5F53\u7136\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u65B9\u5F0F\u67E5\u770B\u5230\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>            <span class="token number">3</span>           7s
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get rs
NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-7498dc98f8   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>         1m
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get pods
NAME                                READY     STATUS    RESTARTS   AGE
nginx-deployment-7498dc98f8-2hhvg   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          1m
nginx-deployment-7498dc98f8-gljq6   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          1m
nginx-deployment-7498dc98f8-l5xns   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          1m
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u8FD9\u91CC\u53EF\u4EE5\u505A\u4E00\u4E2A\u7B80\u5355\u7684\u6709\u610F\u601D\u7684\u5C0F\u5BF9\u6BD4\uFF0C\u53EF\u4EE5\u770B\u5230\uFF0C\u8D8A\u5F80\u4E0A\u5C42\uFF0C\u540D\u79F0\u8D8A\u7B80\u5316\uFF0C\u53C8\u4E00\u6B21\uFF0C\u66FE\u7ECF\u6211\u63D0\u51FA\u8FC7\u7684\uFF0C<code>\u63D0\u53D6\u516C\u56E0\u5F0F\u6CD5</code>\u53C8\u51FA\u73B0\u4E86\uFF0C\u770B\u5230\u5728 pods \u91CC\u8FB9\u7684\u65F6\u5019\uFF0C\u6BCF\u4E2A pod \u7684\u540D\u79F0\u533A\u522B\u5728\u4E8E\u6700\u540E\u7684\u90A3\u51E0\u4F4D\u968F\u673A\u6570\uFF0C\u800C\u5230 rs \u8FD9\u4E00\u5C42\uFF0C\u5219\u7529\u6389\u540E\u8FB9\u7684\u51E0\u4F4D\u6570\uFF0C\u63D0\u53D6\u4E86\u524D\u8FB9\u76F8\u540C\u7684\uFF0C\u53D8\u6210<code>nginx-deployment-7498dc98f8</code>\uFF0C\u518D\u5230 deployments \u5F53\u4E2D\uFF0C\u6570\u5B57\u4E5F\u53BB\u6389\u4E86\uFF0C\u76F4\u63A5\u53D8\u6210\u4E86<code>nginx-deployment</code>\u3002</p><p>\u73B0\u5728\u8FD8\u56DE\u5230\u6B63\u89C4\u7684\u7BA1\u7406\u6765\u67E5\u770B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment -o wide
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE       CONTAINERS   IMAGES         SELECTOR
nginx-deployment   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>            <span class="token number">3</span>           5m        nginx        nginx:1.12.2   <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u52A8\u6001\u6269\u5BB9\u7BA1\u7406\u3002\u547D\u4EE4\u5F88\u76F8\u50CF\u7684\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>            <span class="token number">3</span>           11s
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> scale deployment nginx-deployment --replicas<span class="token operator">=</span><span class="token number">5</span>
deployment.extensions <span class="token string">&quot;nginx-deployment&quot;</span> scaled
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span class="token number">5</span>         <span class="token number">5</span>         <span class="token number">5</span>            <span class="token number">5</span>           1m
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> scale deployment nginx-deployment --replicas<span class="token operator">=</span><span class="token number">2</span>
deployment.extensions <span class="token string">&quot;nginx-deployment&quot;</span> scaled
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span class="token number">2</span>         <span class="token number">2</span>         <span class="token number">2</span>            <span class="token number">2</span>           2m
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u5347\u7EA7\u7684\u8BD5\u9A8C\u3002</p><p>\u8FD9\u91CC\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E9B\u6307\u4EE4\u76F4\u63A5\u9488\u5BF9 pod \u5F53\u4E2D\u7684\u5BB9\u5668\u8FDB\u884C\u66FF\u6362\uFF0C\u4ECE\u800C\u5B9E\u73B0\u5347\u7EA7\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> <span class="token builtin class-name">set</span> image deployment nginx-deployment <span class="token assign-left variable">nginx</span><span class="token operator">=</span>nginx:1.13
deployment.apps <span class="token string">&quot;nginx-deployment&quot;</span> image updated
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u53D1\u73B0\u8FD4\u56DE\u503C\u6CA1\u6709\u95EE\u9898\u3002</p><p>\u90A3\u4E48\u67E5\u770B\u4E00\u4E0B\u8FC7\u7A0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get rs
NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-7498dc98f8   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>         9m
nginx-deployment-86cd46c4d9   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">0</span>         13s
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get rs
NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-7498dc98f8   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">1</span>         9m
nginx-deployment-86cd46c4d9   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">2</span>         18s
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get rs
NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-7498dc98f8   <span class="token number">0</span>         <span class="token number">0</span>         <span class="token number">0</span>         9m
nginx-deployment-86cd46c4d9   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>         22s
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get pods
NAME                                READY     STATUS    RESTARTS   AGE
nginx-deployment-86cd46c4d9-gbrdx   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          11s
nginx-deployment-86cd46c4d9-hs7bf   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          26s
nginx-deployment-86cd46c4d9-mpwtr   <span class="token number">1</span>/1       Running   <span class="token number">0</span>          12s
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u8FD9\u4E2A\u8FC7\u7A0B\uFF0C\u5B8C\u6210\u8BB0\u5F55\u4E86\u6B64 deployment \u5077\u6881\u6362\u67F1\uFF08\u66F4\u6539\u955C\u50CF\uFF09\u7684\u8FC7\u7A0B\uFF0C\u5E76\u4E14\u65B0\u7684 pod \u4E5F\u6210\u529F run \u8D77\u6765\u4E86\u3002\u90A3\u4E48\u6765\u67E5\u770B\u4E00\u4E0B\uFF0C\u662F\u5426\u771F\u7684\u5982\u64CD\u4F5C\u6240\u9884\u60F3\u7684\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment -o wide
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE       CONTAINERS   IMAGES       SELECTOR
nginx-deployment   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>            <span class="token number">3</span>           10m       nginx        nginx:1.13   <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u8FD9\u91CC\u53EF\u4EE5\u770B\u5230\uFF0C\u6211\u4EEC\u4E00\u5F00\u59CB\u5B9A\u4E49\u7684\u7248\u672C\u662F 1.12.2\uFF0C\u73B0\u5728\u5DF2\u7ECF\u53D8\u6210\u4E86 1.13 \u4E86\u3002\u8FD9\u4E9B\u64CD\u4F5C\u8FC7\u7684\u6D41\u7A0B\uFF0C\u4E5F\u4F1A\u88AB\u8BB0\u5F55\u4E0B\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u6307\u4EE4\u8FDB\u884C\u67E5\u770B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> rollout <span class="token function">history</span> deployment nginx-deployment
deployments <span class="token string">&quot;nginx-deployment&quot;</span>
REVISION  CHANGE-CAUSE
<span class="token number">1</span>         <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
<span class="token number">2</span>         <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u770B\u5230\u6709\u4E24\u6B21\u7684\u5386\u53F2\u8BB0\u5F55\u3002\u73B0\u5728\uFF0C\u66F4\u795E\u5947\u7684\u64CD\u4F5C\u6765\u4E86\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u5C06\u7248\u672C\u56DE\u5F52\u5230\u7B2C\u4E00\u6B21\u90E8\u7F72\u65F6\u7684\u7248\u672C\uFF0C\u800C\u4E0D\u9700\u8981\u5176\u4ED6\u5916\u90E8\u7684\u4EFB\u4F55\u52A8\u4F5C\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> rollout undo deployment nginx-deployment
deployment.apps <span class="token string">&quot;nginx-deployment&quot;</span>
<span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get deployment -o wide
NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE       CONTAINERS   IMAGES         SELECTOR
nginx-deployment   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>            <span class="token number">3</span>           19m       nginx        nginx:1.12.2   <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u9664\u4E86\u611F\u6168\u4E4B\u5916\uFF0C\u8FD8\u80FD\u8BF4\u5565\u5462\uFF0C\u4EE5\u5F80\u5728\u8FD9\u79CD\u5347\u7EA7\u4EE5\u53CA\u56DE\u6EDA\u7684\u4E8B\u60C5\u4E0A\uFF0C\u7EDE\u5C3D\u8111\u6C41\uFF0C\u8D39\u5C3D\u7CBE\u529B\uFF0C\u73B0\u5728\uFF0C\u4E00\u5207 so easy\u3002</p><p>\u73B0\u5728\u518D\u53BB\u770B\u4E00\u4E0B\u5386\u53F2\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> rollout <span class="token function">history</span> deployment nginx-deployment
deployments <span class="token string">&quot;nginx-deployment&quot;</span>
REVISION  CHANGE-CAUSE
<span class="token number">2</span>         <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
<span class="token number">3</span>         <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u53D1\u73B0 1 \u88AB\u8986\u76D6\u4E86\uFF0C\u5C31\u4F1A\u8FD9\u6837\u7684\u8F6E\u66FF\uFF0C\u4EE5\u540E\u518D\u8FDB\u884C\u53D1\u5E03\u4EE5\u53CA\u56DE\u6EDA\uFF0C\u90FD\u975E\u5E38\u7684\u65B9\u4FBF\u4E86\u3002</p><p>\u73B0\u5728\uFF0C\u7B80\u5355\u8BF4\u4E00\u4E0B\u7F51\u7EDC\u7684\u4E8B\u513F\uFF0C\u4E0A\u8FB9\u6709\u7559\u4E0B\u8FC7\u4E00\u4E2A\u7591\u95EE\uFF0C\u5C31\u662F\u5982\u4F55\u5C06 pod \u7684\u7AEF\u53E3\u59A5\u5584\u7684\u6620\u5C04\u5230\u5BBF\u4E3B\u673A\u4E0A\u6765\uFF0C\u8FD9\u65F6\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u6307\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> expose deployment nginx-deployment --type<span class="token operator">=</span>NodePort
<span class="token function">service</span> <span class="token string">&quot;nginx-deployment&quot;</span> exposed
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8FD9\u4E2A\u65F6\u5019\u5176\u5B9E\u662F\u4F7F\u7528\u4E86 service \u8FD9\u4E2A\u6982\u5FF5\uFF0C\u4E0B\u8FB9\u4F1A\u8BE6\u7EC6\u4E86\u89E3\uFF0C\u63A5\u7740\u6765\u67E5\u770B\u4E00\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master deployment<span class="token punctuation">]</span><span class="token variable">$kubectl</span> get svc
NAME               TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>        AGE
kubernetes         ClusterIP   <span class="token number">10.96</span>.0.1        <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP        23h
nginx-deployment   NodePort    <span class="token number">10.111</span>.172.137   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">80</span>:32188/TCP   22s
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\u521A\u521A\u5B9A\u4E49\u7684\u8FD9\u4E2A NodePort\uFF0C\u5C06\u5185\u90E8\u7684 80 \u7AEF\u53E3\u6620\u5C04\u5230\u4E86\u96C6\u7FA4\u7684 32188 \u7AEF\u53E3\u4E0A\u6765\uFF0C\u73B0\u5728\u5C31\u53EF\u4EE5\u901A\u8FC7\u96C6\u7FA4 IP+32188 \u6765\u8BBF\u95EE\u4E86\u3002</p><p><img src="http://t.eryajf.net/imgs/2021/09/3df7ca60bf926a59.jpg" alt="image"></p>`,39);function p(l,t){return e}var r=s(a,[["render",p]]);export{r as default};

import{r as e,o,c,b as n,a as t,F as l,d as s,e as p}from"./app.dbf5d933.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const i={},r=n("h2",{id:"_1-\u524D\u8A00",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-\u524D\u8A00","aria-hidden":"true"},"#"),s(" 1\uFF0C\u524D\u8A00")],-1),k=s("\u53D1\u5E03\u5E73\u53F0\u7EDF\u4E00\u9879\u76EE\u4E2D\uFF0C"),b={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},d=s("\u4E8C\u4E2B"),m=s("\u5C06\u516B\u767E\u591A\u4E2Ajob\u5168\u90E8\u57FA\u4E8EJenkins Pipeline\u5B9E\u73B0\uFF0C\u6781\u5927\u7B80\u5316\u4E86\u9879\u76EE\u914D\u7F6E\u4E0E\u7EF4\u62A4\u5DE5\u4F5C\uFF0C\u81EA\u6B64\u4E4B\u540E\u518D\u6CA1\u6709\u4EC0\u4E48\u53D1\u5E03\u4E0A\u9762\u7684\u96BE\u9898\u3002"),h=s("\u5F53\u65F6\u5BBF\u4E3B\u673A\u53D1\u5E03\u7684\u5B9E\u73B0\uFF0C\u5168\u90E8\u57FA\u4E8E\u53C2\u6570\u5316\u6784\u5EFA\u7684\u7279\u6027\u5904\u7406\u96C6\u7FA4\u91CC\u7684IP\u5217\u8868(\u4E8B\u5B9E\u4E0A\u5728\u8FD9\u4E4B\u540E\uFF0C"),_={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},g=s("\u4E8C\u4E2B"),f=s("\u589E\u51CF\u9879\u76EE\u4E5F\u5C31\u53EA\u662F\u9488\u5BF9\u8FD9\u4E2A\u5B57\u6BB5\u7684\u8C03\u6574\u4E86)\uFF0C\u7ED3\u5408ansible\u8FDB\u884C\u53D1\u5E03\uFF0C\u73B0\u5728\u968F\u7740\u5404\u79CD\u57FA\u5EFA\u7684\u5B8C\u5584\uFF0C\u6253\u7B97\u6539\u8FDB\u4E00\u7248\uFF0C\u76F4\u63A5\u5BF9\u63A5CMDB\u83B7\u53D6\u5E94\u7528\u7684\u63A5\u53E3\u62FF\u5230\u5E94\u7528\u5BF9\u5E94\u7684\u4E3B\u673A\u5217\u8868\u6765\u5B8C\u6210\u53D1\u5E03\u7684\u5B9E\u8DF5\uFF0C\u4ECE\u800C\u5B8C\u6210\u53D1\u5E03\u5E73\u53F0\u8FD9\u6700\u540E\u4E00\u70B9\u5DE5\u4F5C\u91CF\u7684\u8986\u76D6\uFF0C\u5B9E\u73B0\u5168\u901A\u7528\uFF0C\u5168\u81EA\u52A8\uFF0C\u56F4\u7ED5\u4EE5CMDB\u4E3A\u4E2D\u5FC3\u7684\u8FD0\u7EF4\u57FA\u5EFA\u5DE5\u4F5C\u3002"),v=n("p",null,"\u5F00\u59CB\u6B63\u9898\u4E4B\u524D\uFF0C\u5148\u770B\u4E00\u773C\u4E4B\u524D\u5DF2\u7ECF\u8FD0\u884C\u534A\u5E74\u5DE6\u53F3\u7684\u5B9E\u8DF5\uFF1A",-1),y=n("p",null,[n("img",{src:"http://t.eryajf.net/imgs/2021/11/1380ddd673c8ec07.jpg",alt:""})],-1),S=s("\u8FD9\u51E0\u4E2A\u53C2\u6570\u6EE1\u8DB3\u4E86"),j={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},w=s("\u4E8C\u4E2B"),q=s("\u5728\u5BBF\u4E3B\u673A\u53D1\u5E03\u5E94\u7528\u7684\u9700\u6C42\uFF0C"),x={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},N=s("\u4E8C\u4E2B"),L=s("\u57FA\u4E8E\u5171\u4EAB\u5E93\u62BD\u53D6\u51FAJenkinsfile\u5F15\u5BFC\u6587\u4EF6\uFF0C\u53C8\u4ECEJenkinsfile\u91CC\u62BD\u53D6\u51FA\u8FD9\u56DB\u4E2A\u53D8\u91CF\uFF0C\u51E0\u4E2A\u90FD\u662F\u5E38\u89C4\u7684\u53D8\u91CF\uFF0C\u4F5C\u7528\u4E5F\u663E\u800C\u6613\u89C1\uFF0C\u56E0\u6B64\u4E0D\u505A\u8FC7\u591A\u4ECB\u7ECD\u3002\u5B9E\u73B0\u5B83\u4EEC\u7684\u4F2A\u4EE3\u7801(\u5B9E\u9645\u5E94\u7528\u4E2D\u9700\u8981\u5C06\u5982\u4E0B\u4EE3\u7801\u4E2D\u7684\u90E8\u5206\u53D8\u91CF\u8FDB\u884C\u63D0\u53D6)\u5982\u4E0B\uFF1A"),E=p(`<div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code>parameters <span class="token punctuation">{</span>
    <span class="token function">string</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&#39;BRANCH&#39;</span><span class="token punctuation">,</span> defaultValue<span class="token punctuation">:</span> <span class="token string">&#39;master&#39;</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">&#39;\u8BF7\u8F93\u5165\u5C06\u8981\u6784\u5EFA\u7684\u4EE3\u7801\u5206\u652F&#39;</span><span class="token punctuation">)</span>
    <span class="token function">choice</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&#39;REMOTE_HOST&#39;</span><span class="token punctuation">,</span> choices<span class="token punctuation">:</span> <span class="token string">&#39;ALL\\n10.3.7.7\\n10.3.7.8&#39;</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">&#39;\u8BF7\u9009\u62E9\u53D1\u5E03\u4E3B\u673A\uFF0C\u9ED8\u8BA4ALL&#39;</span><span class="token punctuation">)</span>
    <span class="token function">choice</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&#39;MODE&#39;</span><span class="token punctuation">,</span> choices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;DEPLOY&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;ROLLBACK&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">&#39;\u8BF7\u9009\u62E9\u53D1\u5E03\u6216\u8005\u56DE\u6EDA\uFF1F&#39;</span><span class="token punctuation">)</span>
    <span class="token function">extendedChoice</span><span class="token punctuation">(</span>description<span class="token punctuation">:</span> <span class="token string">&#39;\u56DE\u6EDA\u7248\u672C\u9009\u62E9,\u5012\u5E8F\u6392\u5E8F\uFF0C\u53EA\u4FDD\u7559\u6700\u8FD1\u5341\u6B21\u7248\u672C\uFF1B\u5982\u679C\u9009\u62E9\u53D1\u5E03\u5219\u5FFD\u7565\u6B64\u9879&#39;</span><span class="token punctuation">,</span> multiSelectDelimiter<span class="token punctuation">:</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&#39;ROLLBACK_VERSION&#39;</span><span class="token punctuation">,</span> propertyFile<span class="token punctuation">:</span> env<span class="token punctuation">.</span>JOB_BASE_NAME<span class="token punctuation">,</span> propertyKey<span class="token punctuation">:</span> env<span class="token punctuation">.</span>JOB_BASE_NAME<span class="token punctuation">,</span> quoteValue<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> saveJSONParameterToFile<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">&#39;PT_SINGLE_SELECT&#39;</span><span class="token punctuation">,</span> visibleItemCount<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,1),O=s("\u5355\u8BF4REMOTE_HOST\uFF0C\u5F53"),T={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},B=s("\u4E8C\u4E2B"),J=s("\u628A"),A=n("code",null,"choices: 'ALL\\n10.3.7.7\\n10.3.7.8'",-1),C=s("\u63D0\u53D6\u6210\u4E00\u4E2A\u53C2\u6570\uFF0C\u90A3\u4E48\u6BCF\u4E2A\u9879\u76EE\u7684\u4E0D\u540C\u4E3B\u673A\u5C31\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u4F20\u9012\uFF0C\u7136\u540E\u5229\u7528\u5982\u4E0B\u4EE3\u7801\u6E32\u67D3\u51FAansible\u9700\u8981\u7684\u4E3B\u673A\u53D1\u5E03\u5217\u8868\uFF1A"),P=p(`<div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#39;\u5B9A\u4E49\u90E8\u7F72\u4E3B\u673A\u5217\u8868&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    steps<span class="token punctuation">{</span>
        script<span class="token punctuation">{</span>
            <span class="token keyword">try</span><span class="token punctuation">{</span>
                sh <span class="token string">&#39;&#39;&#39;
                    OLD=\${IFS}
                    IFS=&#39;\\n&#39;
                        if [ $REMOTE_HOST == &quot;ALL&quot; ];then
                            echo &quot;[remote]&quot; &gt; \${ANSIBLE_HOSTS}
                            for i in \${HOSTS};do echo &quot;$i ansible_port=22&quot; &gt;&gt; \${ANSIBLE_HOSTS};done
                            sed -i &#39;/ALL/d&#39; \${ANSIBLE_HOSTS}
                        else
                            echo &quot;[remote]&quot; &gt; \${ANSIBLE_HOSTS}
                            echo &quot;$REMOTE_HOST ansible_port=34222&quot; &gt;&gt; \${ANSIBLE_HOSTS}
                        fi
                    IFS=\${OLD}
                &#39;&#39;&#39;</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                env<span class="token punctuation">.</span>Reason <span class="token operator">=</span> <span class="token string gstring">&quot;\u5B9A\u4E49\u4E3B\u673A\u5217\u8868\u51FA\u9519&quot;</span>
                <span class="token keyword">throw</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>\u90A3\u4E48\uFF0C\u73B0\u5982\u4ECA\u60F3\u8981\u5BF9\u63A5CMDB\u53D1\u5E03\u670D\u52A1\uFF0C\u5219\u53EA\u9700\u8981\u89E3\u51B3\u4E24\u4E2A\u4E8B\u60C5\u5373\u53EF\uFF1A</p><blockquote><ol><li>\u53C2\u6570\u5316\u6784\u5EFA\u5904\u901A\u8FC7CMDB\u63A5\u53E3\u5C55\u793A\u4E3B\u673A\u5217\u8868\u3002</li><li>\u5B9A\u4E49\u90E8\u7F72\u4E3B\u673A\u5217\u8868\u6B65\u9AA4\u6539\u9020\u6210\u901A\u8FC7\u63A5\u53E3\u83B7\u53D6\u7684\u65B9\u5F0F\u6E32\u67D3\u3002</li></ol></blockquote><h2 id="_2-\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_2-\u53C2\u6570" aria-hidden="true">#</a> 2\uFF0C\u53C2\u6570</h2>`,4),H=s("\u5F53"),F={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},I=s("\u4E8C\u4E2B"),$=s("\u6709\u4E86\u660E\u786E\u7684\u76EE\u6807\u4EE5\u53CA\u5927\u6982\u7684\u601D\u8DEF\u4E4B\u540E\uFF0C\u51ED\u501F\u7740\u4EE5\u5F80\u7F51\u4E0A\u51B2\u6D6A\u65F6\u5927\u6982\u770B\u5230\u8FC7\u6709\u4EBA\u901A\u8FC7groovy\u5B9E\u73B0\u901A\u8FC7\u63A5\u53E3\u6E32\u67D3\u53C2\u6570\u7684\u6A21\u7CCA\u5370\u8C61\uFF0C\u5F00\u59CB\u4E86\u6F2B\u957F\u5730\u7814\u7A76\u4E4B\u8DEF\u3002"),M=n("p",null,"\u672C\u6587\u5982\u4E0B\u4EE3\u7801\u53EF\u80FD\u9700\u8981\u4F60\u6839\u636E\u62A5\u9519\u60C5\u51B5\u6DFB\u52A0\u63D2\u4EF6\uFF0C\u5177\u4F53\u60C5\u51B5\u5177\u4F53\u5206\u6790\uFF0C\u8FD9\u91CC\u4E0D\u591A\u8D58\u8FF0\u3002\u76EE\u524D\u7B80\u5355\u8BB0\u5F97\u81F3\u5C11\u9700\u8981\u5982\u4E0B\u63D2\u4EF6\uFF1A",-1),R={href:"https://github.com/imoutsatsos/uno-choice-plugin",target:"_blank",rel:"noopener noreferrer"},D=s("Active Choices Plugin"),G=s("\uFF1A\u652F\u6301\u7075\u6D3B\u5B9A\u4E49\u7684\u53C2\u6570\u5316\u63D2\u4EF6\u3002"),U={href:"https://github.com/jenkinsci/http-request-plugin",target:"_blank",rel:"noopener noreferrer"},V=s("http request plugin"),z=s("\uFF1A\u652F\u6301\u521B\u5EFAhttp\u8BF7\u6C42\u7684\u63D2\u4EF6\u3002"),K={href:"https://github.com/jenkinsci/pipeline-utility-steps-plugin",target:"_blank",rel:"noopener noreferrer"},W=s("Pipeline Utility Steps"),Y=s("\uFF1A\u63D0\u4F9Bpipeline\u6D41\u6C34\u7EBF\u4E2D\u4E00\u4E9B\u8BFB\u5199\u6587\u4EF6\u4E4B\u7C7B\u7684\u64CD\u4F5C\u3002"),Q=s("\u627E\u5230\u4EE5\u5F80\u6A21\u7CCA\u5370\u8C61\u4E2D\u7684\u6587\u7AE0\uFF0C\u786E\u5B9A\u4E86\u8FD9\u91CC\u9700\u8981\u4F7F\u7528"),X=n("code",null,"Active Choices Plugin",-1),Z=s("\uFF0C\u901A\u8FC7\u4E00\u4E9B\u68C0\u7D22\uFF0C\u5F88\u5FEB\u786E\u5B9A\u4E86\u57FA\u672C\u7684\u53D1\u8D77http request\u7684\u4EE3\u7801\uFF0C\u540E\u8FB9\u4E00\u76F4\u56F0\u4F4F\u81EA\u5DF1\u7684\uFF0C\u662F\u5728\u8FD9\u4E2A\u6B65\u9AA4\u83B7\u53D6\u9879\u76EE\u540D\u5B57\u7684\u9700\u6C42\uFF0C"),nn={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},sn=s("\u4E8C\u4E2B"),an=s("\u9700\u8981\u4E0ECMDB\u4E00\u8D77\u7EA6\u5B9A\u4E00\u4E2A\u4E1C\u897F\u4F5C\u4E3A\u9879\u76EE\u7684\u552F\u4E00key\uFF0C\u4E0D\u7528\u8BF4\uFF0C\u76F4\u63A5\u7528\u9879\u76EE\u540D\u4E00\u5B9A\u662F\u6700\u597D\u7684\uFF0C\u8FD9\u4E2A\u9879\u76EE\u540D\u4ECEgitlab\u4ED3\u5E93\u4E2D\u7684\u547D\u540D\uFF0C\u5230Jenkins\u4E2Djob\u7684\u547D\u540D\uFF0C\u5230CMDB\u4E2D\u5E94\u7528\u7684\u547D\u540D\uFF0C\u4E43\u81F3\u6574\u4E2A\u751F\u547D\u5468\u671F\u4E2D\uFF0C\u90FD\u5E94\u8BE5\u662F\u4E00\u81F4\u7684\uFF0C\u552F\u4E00\u7684\u3002"),tn=n("p",null,"\u63A5\u4E0B\u6765\u76F4\u63A5\u4E0A\u5E72\u8D27\u3002",-1),pn=s("\u4E3A\u4E86\u6A21\u4EFFCMDB\u63A5\u53E3\u8FD4\u56DE\u5E94\u7528\u5BF9\u5E94\u7684\u6570\u636E\u4FE1\u606F\uFF0C"),en={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},on=s("\u4E8C\u4E2B"),cn=s("\u8FD9\u91CC\u76F4\u63A5\u5728Nginx\u4E2D\u6DFB\u52A0\u5982\u4E0B\u914D\u7F6E\uFF1A"),ln=p(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /user-api</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">default_type</span> application/json</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">200</span> <span class="token string">&#39;{&quot;name&quot;:&quot;user-api&quot;,&quot;host&quot;:[&quot;ALL&quot;,&quot;10.0.0.1&quot;,&quot;10.0.0.2&quot;,&quot;10.0.0.3&quot;,&quot;10.0.0.4&quot;]}&#39;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,1),un=s("\u5F53"),rn={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},kn=s("\u4E8C\u4E2B"),bn=s("\u8BF7\u6C42\u670D\u52A1\u5BF9\u5E94\u7684 "),dn=n("code",null,"/user-api",-1),mn=s(" \u63A5\u53E3\u65F6\uFF0C\u5C06\u4F1A\u62FF\u5230\u5E94\u7528\u5BF9\u5E94\u7684\u96C6\u7FA4\u4E3B\u673AIP\u5217\u8868\uFF1A"),hn=p(`<p><img src="http://t.eryajf.net/imgs/2021/11/d18d75896fa689c3.jpg" alt=""></p><p>\u7136\u540E\u5728Jenkins\u4E2D\uFF0C\u521B\u5EFA\u4E00\u4E2A\u540D\u53EB <code>user-api</code> \u7684\u6D41\u6C34\u7EBF\u9879\u76EE\uFF0C\u6D41\u6C34\u7EBF\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token function">parameters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;ChoiceParameter&#39;</span><span class="token punctuation">,</span> filterLength<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> filterable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> randomName<span class="token punctuation">:</span> <span class="token string">&#39;choice-parameter-18463792817640626&#39;</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">&#39;HOST&#39;</span><span class="token punctuation">,</span> choiceType<span class="token punctuation">:</span> <span class="token string">&#39;PT_SINGLE_SELECT&#39;</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">&#39;\u9009\u62E9\u8981\u90E8\u7F72\u7684\u4E3B\u673A&#39;</span><span class="token punctuation">,</span>
    script<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;GroovyScript&#39;</span><span class="token punctuation">,</span>
        fallbackScript<span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sandbox<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> script<span class="token punctuation">:</span> <span class="token string">&#39;return[\\&#39;error\\&#39;]&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        script<span class="token punctuation">:</span> <span class="token punctuation">[</span> classpath<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sandbox<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        script<span class="token punctuation">:</span><span class="token string">&#39;&#39;&#39;import hudson.model.*
import groovy.json.JsonSlurperClassic
def getHostList(jobName) {
    def url = new URL(&quot;http://10.6.6.66:66/\${jobName}&quot;)
    def parsedJSON = parseJSON(url.getText())
    return parsedJSON.host
}
def parseJSON(json) {
    return new groovy.json.JsonSlurperClassic().parseText(json)
}
return getHostList(Thread.currentThread().toString().split(&#39;job&#39;)[-1].replace(&#39;/&#39;,&#39;&#39;))
&#39;&#39;&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

pipeline<span class="token punctuation">{</span>
    agent any
    stages<span class="token punctuation">{</span>
        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#39;Example&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            steps<span class="token punctuation">{</span>
                script<span class="token punctuation">{</span>
                    sh <span class="token string gstring">&quot;&quot;&quot;echo <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>HOST<span class="token punctuation">}</span></span>&quot;&quot;&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>\u5173\u4E8Eactive choice\u63D2\u4EF6\u7684\u6D41\u6C34\u7EBF\u8BED\u6CD5\uFF0C\u8FD9\u91CC\u4E0D\u591A\u4ECB\u7ECD\uFF0C\u53EF\u53C2\u8003\u5B98\u65B9\u6587\u6863\uFF0C\u4E5F\u53EF\u5728\u4F60\u7684Jenkins\u6D41\u6C34\u7EBF\u8BED\u6CD5\u4E2D\u81EA\u884C\u751F\u6210\u7406\u89E3\u3002</p>`,4),_n=n("p",null,[n("code",null,"\u8BF4\u660E\uFF1A")],-1),gn=n("li",null,[n("p",null,[s("\u56E0\u4E3AJenkins\u5B98\u65B9\u5BF9\u6D41\u6C34\u7EBF\u652F\u6301\u7684\u53C2\u6570\u5316\u5B9A\u4E49\u4EC5\u652F\u6301\uFF1AbooleanParam\uFF0Cchoice\uFF0Ctext\uFF0Cpassword\uFF0Cfile\u7B49\u51E0\u79CD\u5E38\u7528\u53C2\u6570\uFF0C\u5E76\u4E0D\u652F\u6301active choice\u8FD9\u7C7B\u590D\u6742\u7684\u9009\u9879\u5B9A\u4E49\uFF0C\u56E0\u6B64\u8FD9\u91CC\u501F\u52A9 "),n("code",null,"properties"),s("\u7684\u65B9\u6CD5\u6765\u5B9E\u4F8B\u5316\u4EFB\u4E00\u9700\u8981\u7684\u5BF9\u8C61\uFF0C\u540C\u6837\uFF0C\u8BE5\u7528\u6CD5\u53EF\u4EE5\u5728Jenkins\u4E2D\u7684\u6D41\u6C34\u7EBF\u8BED\u6CD5\u53C2\u8003\u8BE6\u7EC6\u4E86\u89E3\u3002\u793A\u4F8B\u5982\u4E0B\uFF1A")]),n("p",null,[n("img",{src:"http://t.eryajf.net/imgs/2021/11/863b4561418b6a44.jpg",alt:""})])],-1),fn=n("li",null,[n("p",null,[s("\u4F7F\u7528\u4EE3\u7801\u5B9A\u4E49active choice \u53C2\u6570\u65F6\u9700\u8981\u6CE8\u610F\u4E00\u4E2A\u5751\u662F\uFF1A\u5982\u679C\u4F60\u5728\u4E00\u4E2A\u9879\u76EE\u4E2D\u5B9A\u4E49\u591A\u4E2Aactive choice\u53C2\u6570\uFF0C\u90A3\u4E48\u8BF7\u786E\u4FDD\u4E0D\u540C\u53C2\u6570\u7684 "),n("code",null,"randomName"),s("\u662F\u552F\u4E00\u7684\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\u3002")])],-1),vn=n("p",null,"\u63A5\u7740\u8FDB\u5165\u5230groovy\u811A\u672C\u533A\u57DF\uFF0C\u5728\u5199\u8FD9\u91CC\u7684\u4EE3\u7801\u65F6\uFF0C\u53C2\u8003\u7F51\u7EDC\u4E0A\u7684\u5199\u6CD5\u5404\u79CD\u5404\u6837\uFF0C\u5148\u8BF4\u5F15\u5305\u95EE\u9898\u3002",-1),yn=s("\u540C\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u6709\u4EBA\u5BFC\u5305\u6709\u4EBA\u4E0D\u5BFC\uFF0C\u540E\u6765\u67E5\u4E86\u4E0B\u8FD9\u5757\u513F\uFF1AGroovy\u63D0\u4F9B\u4E00\u4E9B\u9ED8\u8BA4\u7684\u5BFC\u5165\u3002Groovy\u9ED8\u8BA4\u5BFC\u5165\u7684\u5305\u6709"),Sn={href:"https://groovy-lang.org/structure.html#_default_imports",target:"_blank",rel:"noopener noreferrer"},jn=s("\u53C2\u8003"),wn=s("\uFF1A"),qn=p(`<div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>*
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>*
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>*
<span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>*
<span class="token keyword">import</span> groovy<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>*
<span class="token keyword">import</span> groovy<span class="token punctuation">.</span>util<span class="token punctuation">.</span>*
<span class="token keyword">import</span> java<span class="token punctuation">.</span>math<span class="token punctuation">.</span>BigInteger
<span class="token keyword">import</span> java<span class="token punctuation">.</span>math<span class="token punctuation">.</span>BigDecimal
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,1),xn=s("\u4F46"),Nn={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Ln=s("\u4E8C\u4E2B"),En=s("\u4E0A\u8FB9\u7684 "),On=n("code",null,"import groovy.json.JsonSlurperClassic",-1),Tn=s("\u4E5F\u53EF\u4EE5\u7701\u7565\u3002"),Bn=n("li",null,[n("p",null,"\u63A5\u7740\u662F\u501F\u52A9URL\u6A21\u5757\u513F\uFF0C\u4F20\u9012\u552F\u4E00\u53C2\u6570\u5E94\u7528\u540D\uFF0C\u62FF\u5230\u6570\u636E\uFF0Creturn\u51FA\u6765\uFF0C\u5F53\u7136\u8FD9\u91CC\u5982\u679C\u7528\u4E8E\u751F\u4EA7\uFF0C\u8FD8\u5E94\u8BE5\u518D\u597D\u597D\u8BBE\u8BA1\u4E00\u4E0B\uFF0C\u8FD9\u91CC\u6682\u65F6\u6309\u4E0B\u4E0D\u8868\uFF0C\u5728\u540E\u6587\u518D\u8BE6\u8FF0\u3002")],-1),Jn=s("\u6700\u540E\u56F0\u96BE\u7684\u662F\u5982\u679C\u5728\u8FD9\u4E2A\u9636\u6BB5\u62FF\u5230\u9879\u76EE\u540D\uFF0C\u6210\u4E86\u56F0\u4F4F"),An={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Cn=s("\u4E8C\u4E2B"),Pn=s("\u7684\u4E00\u4E2A\u5730\u65B9\uFF0C"),Hn={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Fn=s("\u4E8C\u4E2B"),In=s("\u627E\u904D\u4E86\u7F51\u4E0A\u7684\u8D44\u6599\uFF0C\u8BD5\u4E86\u53C8\u8BD5\uFF0C\u8D25\u4E86\u53C8\u8D25\uFF0C\u4EBA\u5BB6\u8BF4\uFF1A\u6587\u7AE0\u4E0D\u538C\u767E\u56DE\u6539\uFF0C"),$n={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Mn=s("\u4E8C\u4E2B"),Rn=s("\u8BF4\uFF0Ccode\u4E0D\u538C\u767E\u56DE\u8BD5\u3002\u867D\u7136\u5728active choice\u5B98\u65B9\u6587\u6863\u5904\u6709\u8BF4\u660E\u63D0\u4F9B\u4E86\u4E24\u4E2A\u53D8\u91CF\u83B7\u53D6Jenkins\u6784\u5EFA\u7684\u7CFB\u7EDF\u4FE1\u606F\uFF1A"),Dn=p(`<p><img src="http://t.eryajf.net/imgs/2021/11/571d97fb2b30a109.jpg" alt=""></p><p>\u4E5F\u89C1\u5230\u6709\u4EBA\u4F7F\u7528\u8FD9\u4E24\u4E2A\u53D8\u91CF\u6765\u83B7\u53D6\u7684\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">import</span> hudson<span class="token punctuation">.</span>model<span class="token punctuation">.</span>*
<span class="token keyword">def</span> jobName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>binding<span class="token punctuation">.</span>jenkinsProject<span class="token punctuation">.</span>name
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4F46\u7ECF\u81EA\u5DF1\u7684\u6D4B\u8BD5\uFF0C\u5374\u59CB\u7EC8\u90FD\u6CA1\u62FF\u5230\u3002\u6700\u540E\u8FD8\u662F\u5728Stack Overflow\u4E2D\u770B\u5230\u4E00\u4E2A\u7B54\u6848\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">def</span> jobName <span class="token operator">=</span> <span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=~</span> <span class="token string regex">/job\\/(.*?)\\//</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u4F60\u6240\u6709\u9879\u76EE\u90FD\u662F\u5355\u5C42\u76EE\u5F55\u7684\u573A\u666F\uFF0C\u5219\u7528\u4E0A\u8FB9\u7684\u65B9\u6848\u6CA1\u6709\u95EE\u9898\uFF0C\u53EA\u4E0D\u8FC7\u9700\u8981\u6CE8\u610F\u7684\u662F\u8F6C\u4E49\u7B26\u4F1A\u62A5\u8BED\u6CD5\u9519\u8BEF\uFF0C\u53EF\u591A\u52A0\u4E00\u5C42\u8F6C\u4E49\u5904\u7406\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">def</span> jobName <span class="token operator">=</span> <span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=~</span> <span class="token string regex">/job\\\\/</span><span class="token punctuation">(</span><span class="token punctuation">.</span>*<span class="token operator">?</span><span class="token punctuation">)</span>\\\\<span class="token string regex">//</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,7),Gn=s("\u4E0D\u8FC7\u56E0\u4E3A"),Un={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Vn=s("\u4E8C\u4E2B"),zn=s("\u6D4B\u8BD5\u573A\u666F\u662F\u591A\u76EE\u5F55\u7684\u60C5\u51B5\uFF0C\u53D1\u73B0\u5982\u4E0A\u65B9\u6CD5\u62FF\u591A\u5C42\u7EA7job\u7684\u65F6\u5019\u4F1A\u6709\u95EE\u9898\uFF0C\u56E0\u6B64\u4E2A\u4EBA\u6539\u9020\u6B64\u65B9\u6CD5\u5982\u4E0B\uFF1A"),Kn=p(`<div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">def</span> jobName <span class="token operator">=</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;job&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,1),Wn=n("p",null,[s("\u73B0\u5728\u6765\u5230Jenkins\u5F53\u4E2D\uFF0C\u5728\u4EFB\u610F\u76EE\u5F55\u4E2D\u521B\u5EFA\u4E2A\u9879\u76EE\uFF0C\u547D\u540D\u4E3A "),n("code",null,"user-api"),s("\uFF0C\u7136\u540E\u5C06Jenkinsfile\u6587\u4EF6\u4E22\u8FDB\u53BB\uFF0C\u8FD0\u884C\u4E00\u4E0B\uFF0C\u53D1\u73B0\u80FD\u591F\u6EE1\u8DB3\u9700\u6C42\uFF1A")],-1),Yn=n("p",null,[n("img",{src:"http://t.eryajf.net/imgs/2021/11/3cff2c174be2c22a.gif",alt:""})],-1),Qn=n("p",null,"\u5230\u8FD9\u91CC\uFF0C\u53C2\u6570\u57FA\u4E8ECMDB\u63A5\u53E3\u5B9E\u65F6\u62FF\u4E3B\u673A\u5217\u8868\u7684\u9700\u6C42\u5DF2\u7ECF\u6EE1\u8DB3\uFF0C\u63A5\u4E0B\u6765\u5C31\u662F\u5B9E\u73B0\u901A\u8FC7\u63A5\u53E3\u5C06\u6570\u636E\u89E3\u6790\u4E0B\u6765\u7684\u529F\u80FD\u4E86\u3002",-1),Xn=n("h2",{id:"_3-\u6E32\u67D3\u5217\u8868",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3-\u6E32\u67D3\u5217\u8868","aria-hidden":"true"},"#"),s(" 3\uFF0C\u6E32\u67D3\u5217\u8868")],-1),Zn=s("\u6E32\u67D3\u5217\u8868\u4E5F\u662F\u8FD9\u6B21\u6539\u9020\u5DE5\u4F5C\u7684\u91CD\u4E2D\u4E4B\u91CD\uFF0C\u4E00\u5F00\u59CB\u8003\u8651\u7528shell\u5B9E\u73B0\uFF0C\u4F46\u662F\u89C9\u5F97\u63A5\u53E3\u62FF\u5230\u7684json\u7ECF\u7531shell\u5904\u7406\u5B9E\u5728\u4E0D\u7406\u60F3\uFF0C\u4E8E\u662F\u6253\u7B97\u7528go\u505A\u4E2A\u811A\u672C\uFF0C\u4F46\u662F\u4E22\u4E2Ago\u7684\u4E8C\u8FDB\u5236\u653E\u5728\u6D41\u6C34\u7EBF\u4E2D\uFF0C\u53C8\u8FDD\u80CC\u4E86\u64CD\u4F5C\u6307\u4EE4\u5E94\u5F53\u663E\u5F0F\u5448\u73B0\u5728\u5B9A\u4E49\u6D41\u7A0B\u7684code\u8FD9\u4E00\u7406\u5FF5\uFF0C\u4E8E\u662F\u6682\u65F6\u653E\u5F03go\u7684\u5B9E\u73B0\u65B9\u6848\uFF0C\u6253\u7B97\u8F6C\u7528\u4E0E\u6D41\u6C34\u7EBF\u66F4\u4EB2\u548C\u7684groovy\u6765\u5B9E\u73B0\u8FD9\u4E2A\u9700\u6C42\uFF0C\u4E0D\u5FC5\u89C9\u5F97\u96BE\uFF0C\u4E8B\u5B9E\u4E0A\u5728\u5B9E\u73B0\u5982\u4E0B\u9700\u6C42\u4E4B\u524D\uFF0C"),ns={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},ss=s("\u4E8C\u4E2B"),as=s("\u5BF9groovy\u7684\u7F16\u7A0B\u7ECF\u9A8C\u4E5F\u662F\u96F6\uFF0C\u56E0\u6B64\u5982\u4E0B\u7684\u4EE3\u7801\u5B9E\u73B0\u4E5F\u4F1A\u4EE5\u8FD0\u7EF4\u89C6\u89D2\u6765\u5B9E\u73B0\uFF0C\u800C\u975E\u7EAF\u7F16\u7A0B\u65B9\u5F0F\uFF0C\u5BF9\u4E8E\u5C06\u53D1\u5E03\u6D41\u6C34\u7EBF\u5199\u7684\u50CF\u7F16\u7A0B\u4E00\u4E2A\u9879\u76EE\u90A3\u6837\uFF0C"),ts={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},ps=s("\u4E8C\u4E2B"),es=s("\u5E76\u4E0D\u559C\u6B22\u3002"),os=s("\u4F46\u5728\u8FD9\u91CC\u5148\u8BF4\u4E00\u4E2A"),cs={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},ls=s("\u4E8C\u4E2B"),us=s("\u540E\u6765\u624D\u77E5\u9053\u7684\u4E8B\u60C5\uFF1A\u5728\u58F0\u660E\u5F0F\u7684\u6D41\u6C34\u7EBF\u4E2D\uFF0C\u4E00\u4E9B\u573A\u666F\u4E2D\u5BF9\u539F\u751F\u7684groovy\u4EE3\u7801\u4F1A\u6709\u5404\u79CD\u5404\u6837\u7684\u5947\u602A\u9650\u5236\uFF0C\u6BD4\u5982"),is={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},rs=s("\u4E8C\u4E2B"),ks=s("\u5728\u5B9E\u9A8C\u7684\u8FC7\u7A0B\u4E2D\u5C31\u9047\u5230\u8FC7\u4E0D\u8BA9\u7528URL\u6A21\u5757\u513F\uFF0C\u4E0D\u8BA9\u7528write\u6A21\u5757\u513F\u7684\uFF0C\u5927\u6982\u62A5\u9519\u65E5\u5FD7\u5982\u4E0B\uFF1A"),bs=p(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Scripts not permitted to use staticMethod org<span class="token punctuation">.</span>codehaus<span class="token punctuation">.</span>groovy<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>DefaultGroovyMethods getText java<span class="token punctuation">.</span>net<span class="token punctuation">.</span><span class="token constant">URL</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Method definition not expected here<span class="token punctuation">.</span> Please define the method at an appropriate place or perhaps <span class="token keyword">try</span> using a block<span class="token operator">/</span>Closure instead
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u540E\u6765\u624D\u4E86\u89E3\u5230\uFF0C\u9488\u5BF9groovy\u539F\u751F\u8BED\u6CD5\u7684\u4E00\u4E9B\u5E38\u89C1\u7528\u6CD5\uFF0C\u4E8B\u5B9E\u4E0AJenkins pipeline\u8BED\u6CD5\u4E2D\u5DF2\u7ECF\u63D0\u4F9B\u4E86\u76F8\u5BF9\u5E94\u7684\u65B9\u6CD5\u8FDB\u884C\u652F\u6301\uFF0C\u6BD4\u5982\u539F\u751F\u7684<code>url</code>\u65B9\u6CD5\uFF0C\u5728pipeline\u4E2D\uFF0C\u5E94\u8BE5\u6539\u7528 <code>httpRequest</code>\u65B9\u6CD5\uFF0C\u539F\u751F\u7684<code>json</code>\u89E3\u6790\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u6539\u7528 <code>readJSON</code>\u65B9\u6CD5\uFF0C\u539F\u751F\u7684 <code>writer.writeLine</code>\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u6539\u7528 <code>writeFile</code>\u65B9\u6CD5\uFF0C\u51E1\u6B64\u79CD\u79CD\uFF0C\u4E0D\u4E00\u800C\u8DB3\u3002</p>`,4),ds=s("\u6240\u4EE5\u5F53"),ms={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},hs=s("\u4E8C\u4E2B"),_s=s("\u7528\u539F\u751Fgroovy\u5728\u672C\u5730\u8C03\u8BD5\u6210\u529F\u4E4B\u540E\uFF0C\u5C41\u98A0\u5C41\u98A0\u8DD1\u5230Jenkins\u4E0A\u8FD0\u884C\u65F6\uFF0C\u53D1\u73B0\u5404\u4E2A\u6B65\u9AA4\u90FD\u4F1A\u5361\u81EA\u5DF1\u4E00\u9053\uFF0C\u6700\u540E\u4E0D\u5F97\u4E0D\u7528Jenkins\u7ED9\u5B9A\u7684\u65B9\u6CD5\u8FDB\u884C\u4E86\u91CD\u6784\u6539\u9020\uFF0C\u4E0D\u8FC7\u8FD9\u91CC\u8FD8\u662F\u653E\u4E00\u4E0Bgroovy\u539F\u751F\u7684\u5904\u7406\u65B9\u5F0F\uFF0C\u4EC5\u5F53\u7559\u5FF5\u81EA\u5DF1\u594B\u6597\u7684\u6210\u679C\uFF1A"),gs=p(`<div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">import</span> groovy<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JsonSlurperClassic
<span class="token keyword">def</span> <span class="token function">getHostList</span><span class="token punctuation">(</span>jobName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">def</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string gstring">&quot;http://10.6.6.66:66/<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>jobName<span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> parsedJSON <span class="token operator">=</span> <span class="token function">parseJSON</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> parsedJSON<span class="token punctuation">.</span>host
<span class="token punctuation">}</span>
<span class="token keyword">def</span> <span class="token function">parseJSON</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">groovy<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JsonSlurperClassic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseText</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> newFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">$</span><span class="token punctuation">{</span>ANSIBLE_HOSTS<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newFile<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    newFile<span class="token punctuation">.</span><span class="token function">withWriter</span><span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> writer <span class="token operator">-&gt;</span>
        writer<span class="token punctuation">.</span>writeLine <span class="token string">&#39;[remote]&#39;</span>
    <span class="token punctuation">}</span>
    host <span class="token operator">=</span> <span class="token function">getHostList</span><span class="token punctuation">(</span><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>JOB_BASE_NAME<span class="token punctuation">}</span><span class="token punctuation">)</span>
    host <span class="token operator">-=</span> <span class="token string gstring">&quot;ALL&quot;</span>
    host<span class="token punctuation">.</span>each<span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
        newFile<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>it <span class="token operator">+</span> <span class="token string gstring">&quot; ansible_port=22\\n&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>\u8FD9\u6BB5\u4EE3\u7801\u5728\u672C\u5730\u76F4\u63A5\u901A\u8FC7groovy\u89E3\u6790\u662F\u6CA1\u6BDB\u75C5\u7684\uFF0C\u653E\u5230Jenkins\u4E2D\u5C31\u4E0D\u884C\u4E86\u3002</p><p>\u4E8E\u662F\u518D\u6B21\u501F\u52A9Jenkins\u4E2D\u6D41\u6C34\u7EBF\u8BED\u6CD5\u53C2\u8003\uFF0C\u5BF9\u5404\u4E2A\u529F\u80FD\u70B9\u9010\u4E2A\u51FB\u7834\uFF0C\u6700\u540E\u5B8C\u6210\u811A\u672C\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token function">parameters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;ChoiceParameter&#39;</span><span class="token punctuation">,</span> filterLength<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> filterable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> randomName<span class="token punctuation">:</span> <span class="token string">&#39;choice-parameter-18463792817640626&#39;</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">&#39;HOST&#39;</span><span class="token punctuation">,</span> choiceType<span class="token punctuation">:</span> <span class="token string">&#39;PT_SINGLE_SELECT&#39;</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">&#39;\u9009\u62E9\u8981\u90E8\u7F72\u7684\u4E3B\u673A&#39;</span><span class="token punctuation">,</span>
    script<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;GroovyScript&#39;</span><span class="token punctuation">,</span>
        fallbackScript<span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sandbox<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> script<span class="token punctuation">:</span> <span class="token string">&#39;return[\\&#39;error\\&#39;]&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        script<span class="token punctuation">:</span> <span class="token punctuation">[</span> classpath<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sandbox<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        script<span class="token punctuation">:</span><span class="token string">&#39;&#39;&#39;import hudson.model.*
def getHostList(jobName) {
    def url = new URL(&quot;http://10.6.6.66:66/\${jobName}&quot;)
    def parsedJSON = parseJSON(url.getText())
    return parsedJSON.host
}
def parseJSON(json) {
    return new groovy.json.JsonSlurperClassic().parseText(json)
}
return getHostList(Thread.currentThread().toString().split(&#39;job&#39;)[-1].replace(&#39;/&#39;,&#39;&#39;))
&#39;&#39;&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

pipeline<span class="token punctuation">{</span>
    agent any
    environment <span class="token punctuation">{</span>
        ANSIBLE_PORT<span class="token operator">=</span><span class="token string gstring">&quot;22&quot;</span> <span class="token comment">// \u5B9A\u4E49\u8FDC\u7A0B\u4E3B\u673Assh\u7AEF\u53E3\uFF0C\u4E00\u822C\u4E0D\u9700\u8981\u66F4\u6539</span>
        ANSIBLE_USER<span class="token operator">=</span><span class="token string gstring">&quot;root&quot;</span> <span class="token comment">// \u5B9A\u4E49\u8FDC\u7A0B\u4E3B\u673Assh\u7528\u6237\uFF0C\u4E00\u822C\u4E0D\u9700\u8981\u66F4\u6539</span>
        <span class="token comment">// \u5B9A\u4E49\u4E3B\u673Ahosts\u6587\u4EF6\uFF0C\u4E00\u822C\u4E0D\u7528\u66F4\u6539</span>
        ANSIBLE_HOSTS<span class="token operator">=</span><span class="token string gstring">&quot;<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>WORKSPACE<span class="token punctuation">}</span></span>/<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>JOB_BASE_NAME<span class="token punctuation">}</span></span>_hosts&quot;</span>
    <span class="token punctuation">}</span>
    stages<span class="token punctuation">{</span>
        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#39;\u5B9A\u4E49\u4E3B\u673A\u5217\u8868&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            steps<span class="token punctuation">{</span>
                script<span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>HOST <span class="token operator">==</span> <span class="token string">&#39;ALL&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">def</span> response <span class="token operator">=</span> httpRequest \\
                                httpMode<span class="token punctuation">:</span> <span class="token string gstring">&quot;GET&quot;</span><span class="token punctuation">,</span>
                                ignoreSslErrors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                                contentType<span class="token punctuation">:</span> <span class="token string">&#39;APPLICATION_JSON&#39;</span><span class="token punctuation">,</span>
                                validResponseCodes<span class="token punctuation">:</span> <span class="token string">&#39;200&#39;</span><span class="token punctuation">,</span>
                                <span class="token comment">// requestBody: groovy.json.JsonOutput.toJson([&quot;k1&quot;:&quot;v1&quot;,&quot;k2&quot;:&quot;v2&quot;]),</span>
                                url<span class="token punctuation">:</span> <span class="token string gstring">&quot;http://10.6.6.66:66/<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>JOB_BASE_NAME<span class="token punctuation">}</span></span>&quot;</span>
                            println response<span class="token punctuation">.</span>content
                            <span class="token keyword">def</span> props <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> response<span class="token punctuation">.</span>content
                            props<span class="token punctuation">.</span>host <span class="token operator">-=</span> <span class="token string gstring">&quot;ALL&quot;</span>
                            writeFile file<span class="token punctuation">:</span> env<span class="token punctuation">.</span>ANSIBLE_HOSTS<span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token string">&#39;[remote]\\n&#39;</span>
                            props<span class="token punctuation">.</span>host<span class="token punctuation">.</span>each<span class="token punctuation">{</span>
                                <span class="token function">appendFile</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>ANSIBLE_HOSTS<span class="token punctuation">,</span>it <span class="token operator">+</span> <span class="token string gstring">&quot; ansible_port=<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>ANSIBLE_PORT<span class="token punctuation">}</span></span> ansible_user=<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>ANSIBLE_USER<span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                            writeFile file<span class="token punctuation">:</span> env<span class="token punctuation">.</span>ANSIBLE_HOSTS<span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token string">&#39;[remote]\\n&#39;</span>
                            <span class="token function">appendFile</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>ANSIBLE_HOSTS<span class="token punctuation">,</span>HOST <span class="token operator">+</span> <span class="token string gstring">&quot; ansible_port=<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>ANSIBLE_PORT<span class="token punctuation">}</span></span> ansible_user=<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>ANSIBLE_USER<span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        env<span class="token punctuation">.</span>REASON <span class="token operator">=</span> <span class="token string gstring">&quot;\u5B9A\u4E49\u4E3B\u673A\u5217\u8868\u51FA\u9519&quot;</span>
                        <span class="token keyword">throw</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8BE5\u65B9\u6CD5\u5B9E\u73B0\u4E86\u5F80\u6587\u4EF6\u5185\u8FFD\u52A0\u5185\u5BB9\u7684\u529F\u80FD</span>
<span class="token keyword">def</span> <span class="token function">appendFile</span><span class="token punctuation">(</span>String fileFullPath<span class="token punctuation">,</span> String line<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fileExists</span><span class="token punctuation">(</span>fileFullPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        current <span class="token operator">=</span> readFile fileFullPath
    <span class="token punctuation">}</span>
    writeFile file<span class="token punctuation">:</span> fileFullPath<span class="token punctuation">,</span> text<span class="token punctuation">:</span> current <span class="token operator">+</span> line <span class="token operator">+</span> <span class="token string gstring">&quot;\\n&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div>`,4),fs=n("p",null,[n("code",null,"\u8BF4\u660E\uFF1A"),s("\u8FD9\u91CC\u4E0D\u4E00\u4E00\u4ECB\u7ECD\u4EE3\u7801\u4E86\uFF0C\u6361\u4E00\u4E9B\u5E72\u8D27\u804A\u804A\uFF0C\u6709\u8BDD\u5219\u957F\uFF0C\u65E0\u8BDD\u5219\u77ED\u3002")],-1),vs=n("code",null,"httpRequest",-1),ys=s("\u5728\u6D41\u6C34\u7EBF\u8BED\u6CD5\u4E2D\u6709\u975E\u5E38\u8BE6\u7EC6\u7684\u8BBE\u7F6E\u9879\uFF0C\u611F\u5174\u8DA3\u7684\u540C\u5B66\u53EF\u4EE5\u53BB\u4E86\u89E3\u67E5\u770B\uFF0C\u8FD9\u91CC\u7279\u5730\u9884\u7559\u4E86requestBody\uFF0C\u662F\u4E3A\u4E86"),Ss={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},js=s("\u4E8C\u4E2B"),ws=s("\u901A\u8FC7\u8BE5\u53C2\u6570\u4E0ECMDB\u4EA4\u4E92\u65F6\uFF0C\u80FD\u591F\u63D0\u4F9B\u66F4\u52A0\u7075\u6D3B\u7684\u65B9\u5F0F\uFF0C\u4ECE\u800C\u8BA9\u4EE3\u7801\u66F4\u5177\u666E\u9002\u6027\u3002"),qs=n("code",null,"readJSON",-1),xs=s("\u7684\u7528\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u8BA9"),Ns={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Ls=s("\u4E8C\u4E2B"),Es=s("\u80FD\u591F\u76F4\u63A5\u89E3\u6790json\u4E32\u3002"),Os=n("code",null,"-=",-1),Ts=s("\u662Fgroovy\u8BED\u6CD5\u7684\u4E00\u79CD\uFF0C\u80FD\u591F\u76F4\u63A5\u5220\u9664\u6389\u5217\u8868\u4E2D"),Bs={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},Js=s("\u4E8C\u4E2B"),As=s("\u4E0D\u9700\u8981\u7684\u5143\u7D20\u3002"),Cs=n("li",null,[n("code",null,".each"),s("\u662F\u4E00\u4E2A\u904D\u5386\u65B9\u6CD5\uFF0C\u5B83\u4F1A\u8FD4\u56DE\u4E00\u4E2Ait\u5BF9\u8C61\u8868\u793Avalue\u3002")],-1),Ps=n("li",null,[n("code",null,"writeFile"),s("\u65B9\u6CD5\u9ED8\u8BA4\u662F\u8986\u76D6\u5F0F\u5199\u6587\u4EF6\uFF0C\u901A\u8FC7\u4E00\u4E2A\u5916\u6302\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u8FFD\u52A0\u529F\u80FD\u3002")],-1),Hs=n("h2",{id:"_4-\u5F52\u7EB3",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4-\u5F52\u7EB3","aria-hidden":"true"},"#"),s(" 4\uFF0C\u5F52\u7EB3")],-1),Fs=s("\u7ECF\u8FC7\u4EE5\u4E0A\u601D\u8DEF\u7684\u5B9E\u73B0\u4E4B\u540E\uFF0C"),Is={href:"https://github.com/eryajf",target:"_blank",rel:"noopener noreferrer"},$s=s("\u4E8C\u4E2B"),Ms=s("\u53EF\u4EE5\u6765\u505A\u4E00\u4E9B\u5F52\u7EB3\uFF0C\u5C06\u4E00\u4E9B\u89C4\u8303\u5316\u7684\u4E1C\u897F\u7EA6\u5B9A\u51FA\u6765\uFF0C\u4EE5\u4FBF\u4E8E\u901A\u8FC7\u540C\u6837\u7684\u914D\u7F6E\u4EE3\u7801\uFF0C\u5B8C\u6210\u4E0D\u540C\u7684\u9879\u76EE\u53D1\u5E03\u9700\u6C42\u3002"),Rs=p(`<ol><li><p>\u552F\u4E00key\u4E32\u8054</p><p>CMDB\u5E73\u53F0\u5EFA\u8BBE\u671F\u95F4\uFF0C\u5E94\u7528\u7684\u6A21\u578B\u81F3\u5C11\u5E94\u8BE5\u6709\u5982\u4E0B\u5B9A\u4E49\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># http://10.6.6.66:66/project?project=test-user-api-runner&amp;env=test

ProjectName  \u5168\u5C40\u552F\u4E00
	ProjectEnv  \u5E94\u7528\u8981\u6709\u73AF\u5883\u7684\u5C5E\u6027
		test
		pre
		prod
	HostList  \u4E3B\u673A\u5217\u8868\uFF0C\u5176\u4E2D\u4E3B\u673A\u5217\u8868\u5E94\u8BE5\u901A\u8FC7\u8BF7\u6C42\u53C2\u6570\u8FDB\u884C\u533A\u5206
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u552F\u4E00key\u4FDD\u969C\u4E86\u5168\u5C40\u4EA4\u4E92\u7684\u7EDF\u4E00\uFF0C\u73AF\u5883\u6807\u8BC6\u4E3A\u5E94\u7528\u7684\u4E0D\u540C\u73AF\u5883\u63D0\u4F9B\u4E0D\u540C\u6570\u636E\uFF0C\u5728Jenkins\u914D\u7F6E\u53D1\u5E03\u65F6\uFF0C\u5C31\u4F1A\u6709\u5982\u4E0B\u4E09\u79CD\u73AF\u5883\uFF1A<code>test-user-api</code>\uFF0C<code>pre-user-api</code>\uFF0C<code>prod-user-api</code>\u3002\u7136\u540E\u5C06job\u540D\u5B57\u62C6\u5206\uFF0C\u6784\u9020\u5982\u4E0B\u8BF7\u6C42\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code>A <span class="token operator">=</span> <span class="token string">&#39;test-user-api-runner&#39;</span>
<span class="token keyword">def</span> B <span class="token operator">=</span> A<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> projectEnv <span class="token operator">=</span> B<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
println projectEnv
B<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> projectName <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
println projectName
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u901A\u8FC7\u4E00\u4E9B\u5904\u7406\u4ECEJenkins\u9879\u76EE\u540D\u4E2D\u62FF\u5230\u73AF\u5883\u4EE5\u53CA\u9879\u76EE\u540D\u7684\u53C2\u6570\uFF0C\u5B9E\u73B0\u4E00\u5957\u4EE3\u7801\uFF0C\u53D1\u5E03\u591A\u5957\u73AF\u5883\u7684\u9700\u6C42\u3002</p></li><li><p>\u4FDD\u7559\u5197\u4F59\u5B57\u6BB5</p><p>\u9664\u4E86\u4E0A\u8FB9\u63D0\u5230\u7684\u4E09\u79CD\u73AF\u5883\u5B57\u6BB5\uFF0C\u8FD8\u5E94\u8BE5\u7ED3\u5408\u81EA\u5DF1\u7684\u5B9E\u9645\u4FDD\u7559\u4E00\u5B9A\u7684\u5197\u4F59\u5B57\u6BB5\uFF0C\u6BD4\u5982\u56E0\u4E3A\u7ECF\u5E38\u641E\u6D3B\u52A8\u800C\u9700\u8981\u6269\u7F29\u5BB9\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u5E94\u8BE5\u518D\u591A\u4E2A\u573A\u666F<code>expand-user-api</code>\uFF0C\u81EA\u52A8\u6269\u5BB9\u8FC7\u7A0B\u4E2D\uFF0C\u901A\u8FC7\u8FD0\u7EF4\u5E73\u53F0\u8D2D\u4E70\u4E0B\u6765\u7684\u4E3B\u673A\u901A\u8FC7\u8FD9\u4E2A\u5B57\u6BB5\u8FD4\u56DE\uFF0C\u7136\u540E\u590D\u5236\u4E00\u4E2A\u9879\u76EE\u5C06\u4EE3\u7801\u540C\u6B65\u5230\u6269\u5BB9\u7684\u4E3B\u673A\u4E0A\u53BB\u3002</p></li><li><p>\u63D0\u9AD8CMDB\u7A33\u5B9A\u6027</p><p>\u5F53CMDB\u7684\u5E94\u7528\u63A5\u53E3\u66B4\u6F0F\u7ED9\u53D1\u5E03\u63A5\u5165\u4E4B\u540E\uFF0C\u540C\u65F6\u5BF9CMDB\u6240\u5728\u670D\u52A1\u7684\u7A33\u5B9A\u6027\u63D0\u9AD8\u4E86\u8981\u6C42\uFF0C\u539F\u6765\u901A\u8FC7\u5355\u53F0\u63D0\u4F9B\u670D\u52A1\u7684\uFF0C\u73B0\u5728\u5C31\u9700\u8981\u914D\u7F6E\u6210\u4E24\u53F0\u9AD8\u53EF\u7528\u8D77\u6765\u3002</p></li><li><p>\u4EE5CMDB\u4E3A\u4E2D\u5FC3</p><p>\u8FD9\u4E00\u4E3E\u63AA\u5F7B\u5E95\u5C06\u53D1\u5E03\u4E2D\u5FC3\u4ECE\u539F\u6765\u7684\u624B\u52A8\u7EF4\u62A4\u8F6C\u5230\u4EE5CMDB\u4E3A\u4E2D\u5FC3\u7684\u65B9\u6848\u4E2D\u6765\uFF0C\u90A3\u4E48\u5982\u679C\u4FDD\u969CCMDB\u4E2D\u7684\u6570\u636E\u53EF\u6301\u7EED\u6027\u7A33\u5B9A\uFF0C\u51C6\u786E\uFF0C\u5C31\u662F\u9700\u8981\u4ECE\u8D2D\u4E70\u673A\u5668\uFF0C\u6269\u7F29\u5BB9\u6D41\u7A0B\uFF0C\u7B49\u9010\u4E2A\u53D8\u52A8\u7684\u573A\u666F\u4E2D\u6765\u7EC6\u7EC6\u89C4\u5212\u3002</p></li><li><p>\u5C01\u88C5\u4E00\u5C42</p><p>\u5982\u4E0A\u7B56\u7565\u5168\u5C40\u63A8\u5E7F\u4E4B\u540E\uFF0C\u6240\u6709\u5E94\u7528\u7684\u4FE1\u606F\u5168\u90E8\u7EF4\u62A4\u5728CMDB\u4E2D\uFF0C\u90A3\u4E48\u53D1\u5E03\u5C31\u53EA\u662F\u4E00\u4E2A\u900F\u660E\u7684\u7BA1\u9053\uFF0C\u53EA\u9700\u8981\u5C06\u5E94\u7528\u7684\u53C2\u6570\u4F20\u9012\u7ED9\u7BA1\u9053\u5373\u53EF\u89E6\u53D1\u6784\u5EFA\uFF0C\u8FD9\u4E2A\u65F6\u5019\uFF0C\u5C31\u662F\u9002\u5408\u5728Jenkins\u4E0A\u5C01\u88C5\u4E00\u5C42\uFF0C\u5B8C\u5168\u96C6\u6210\u5230\u8FD0\u7EF4\u5E73\u53F0\u7684\u65F6\u5019\u4E86\u3002\u6709\u5F88\u591A\u516C\u53F8\u4E00\u4E0A\u6765\u5C31\u8981\u7ED9Jenkins\u5C01\u88C5\uFF0C\u6700\u540E\u53D1\u73B0\u8981\u4E48\u65E0\u6CD5\u5C01\u88C5\u6210\u719F\uFF0C\u8981\u4E48\u5C31\u5C01\u88C5\u51FA\u4E86\u4E2A\u65B0\u7684Jenkins\u3002</p></li></ol><p>\u672C\u6587\u4ECE\u60F3\u6CD5\u7684\u840C\u53D1\uFF0C\u5230\u601D\u8DEF\u7684\u68B3\u7406\uFF0C\u5230\u9010\u6B65\u7684\u5B9E\u73B0\uFF0C\u90FD\u505A\u4E86\u8BE6\u7EC6\u4ECB\u7ECD\u4EE5\u53CA\u8FC7\u7A0B\u4E2D\u7684\u5FC3\u7406\u63CF\u5199\uFF0C\u8FD0\u7EF4\u6807\u51C6\u5316\u89C4\u8303\u5316\u5EFA\u8BBE\u4E4B\u8DEF\u975E\u5E38\u6F2B\u957F\uFF0C\u9700\u8981\u4E0D\u65AD\u5730\u6DF1\u8015\u5EFA\u8BBE\uFF0C\u66F4\u9700\u8981\u65E0\u6570\u8FD9\u6837\u7684\u70B9\u6C47\u805A\u8D77\u6765\uFF0C\u4ECE\u800C\u624D\u80FD\u5F62\u6210\u4E00\u7247\u5802\u5802\u6C6A\u6D0B\u3002</p><p>\u672C\u6587\u7814\u7A76\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u6211\u66FE\u5728\u670B\u53CB\u5708\u53D1\u8868\u611F\u6168\u4E00\u6BB5\uFF0C\u4E5F\u6458\u5F55\u4E0E\u6B64\uFF1A</p><p>::: center \u300A\u6280\u672F\u7684\u4E50\u8DA3\u300B</p><p>\u4F60\u5728\u51B2\u7834\u4E00\u4E2A\u65B0\u77E5\u8BC6\u70B9\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u96BE\u9053\u4E0D\u5145\u6EE1\u66F2\u6298\uFF0C\u56F0\u5384\uFF0C\u8FF7\u60D8\uFF0C\u53CD\u590D\u4E48\uFF01</p><p>\u4F60\u77E5\u9053\u81EA\u5DF1\u5C06\u8981\u8FBE\u5230\u4F55\u65B9</p><p>\u4F60\u77E5\u9053\u81EA\u5DF1\u5C06\u8981\u9762\u5BF9\u591A\u5C11\u51F6\u9669</p><p>\u4F60\u51E0\u4E4E\u9760\u8FD1\u6700\u7EC8\u7B54\u6848</p><p>\u4F60\u7ECF\u5E38\u4E0E\u6B63\u786E\u7B54\u6848\u64E6\u80A9</p><p>\u4F60\u5728\u88AB\u81EA\u5DF1\u7684\u602F\u5F31\u529D\u9000</p><p>\u4F60\u5728\u88AB\u81EA\u5DF1\u7684\u52C7\u6C14\u9F13\u52B1</p><p>\u4F60\u7EC8\u4E8E\uFF0C\u4F1A\u6536\u83B7\u90A3\u6700\u7EC8\u7684\u6B63\u786E\u7B54\u6848</p><p>\u800C\u8FD9\u4E2A\u7B54\u6848\uFF0C\u8DB3\u591F\u4F60\u5F00\u5FC3\u707F\u70C2\u597D\u4E45\u597D\u4E45 :::</p><p>\u540C\u65F6\u6458\u5F55\u4E86\u5357\u5B8B\u8BD7\u4EBA\u6768\u4E07\u91CC\u7684\u4E00\u9996\u8BD7\u8868\u610F\uFF1A</p><p>::: center \u300A\u6842\u6E90\u94FA\u300B- \u6768\u4E07\u91CC</p><p>\u4E07\u5C71\u4E0D\u8BB8\u4E00\u6EAA\u5954\uFF0C</p><p>\u62E6\u5F97\u6EAA\u58F0\u65E5\u591C\u55A7\u3002</p><p>\u5230\u5F97\u524D\u5934\u5C71\u811A\u5C3D\uFF0C</p><p>\u5802\u5802\u6EAA\u6C34\u51FA\u524D\u6751\u3002 :::</p><h2 id="_5-\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#_5-\u53C2\u8003" aria-hidden="true">#</a> 5\uFF0C\u53C2\u8003</h2>`,20),Ds={href:"https://stackoverflow.com/questions/18600715/how-to-get-the-job-name-on-a-groovy-dynamic-parameter",target:"_blank",rel:"noopener noreferrer"},Gs=s("How to get the job name on a groovy dynamic parameter?"),Us={href:"http://bart.jakubowski.in/jenkins-active-reactive-plugin/",target:"_blank",rel:"noopener noreferrer"},Vs=s("A real example of Jenkins active choices and reactive parameter"),zs={href:"https://wizardforcel.gitbooks.io/ibm-j-pg/content/5.html",target:"_blank",rel:"noopener noreferrer"},Ks=s("\u5B9E\u6218 Groovy: for each \u5256\u6790"),Ws={href:"https://www.codenong.com/8802647/",target:"_blank",rel:"noopener noreferrer"},Ys=s("\u5728Java / Groovy\u4E2D\u5C06\u6570\u7EC4\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32"),Qs={href:"https://www.codenong.com/41900830/",target:"_blank",rel:"noopener noreferrer"},Xs=s("\u5982\u4F55\u5C06\u6587\u672C\u8FFD\u52A0\u5230jenkinsfile\u4E2D\u7684\u6587\u4EF6"),Zs={href:"https://www.lfhacks.com/tech/jenkins-httprequest/",target:"_blank",rel:"noopener noreferrer"},na=s("Jenkins Pipeline \u5B9E\u73B0 http \u8BF7\u6C42\u5E76\u89E3\u6790\u54CD\u5E94"),sa={href:"https://stackoverflow.com/questions/40870657/groovy-method-definition-not-expected-here",target:"_blank",rel:"noopener noreferrer"},aa=s("Groovy: Method definition not expected here"),ta={href:"https://gist.github.com/alanland/5847446",target:"_blank",rel:"noopener noreferrer"},pa=s("\u6587\u4EF6\u64CD\u4F5C"),ea={href:"https://mr-dai.github.io/groovy-dev-kit/",target:"_blank",rel:"noopener noreferrer"},oa=s("Groovy \u6559\u7A0B"),ca=p(`<h2 id="_6-\u8865\u5145" tabindex="-1"><a class="header-anchor" href="#_6-\u8865\u5145" aria-hidden="true">#</a> 6\uFF0C\u8865\u5145</h2><h3 id="_1-\u53C2\u6570\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_1-\u53C2\u6570\u4F18\u5316" aria-hidden="true">#</a> 1\uFF0C\u53C2\u6570\u4F18\u5316</h3><p>\u4E0A\u8FB9\u4E3E\u4F8B\u4E2D\uFF0C\u5E94\u7528\u8FD4\u56DE\u7684\u4E3B\u673A\u5217\u8868\u91CC\u8FD8\u6709\u4E00\u4E2AALL\u5B57\u6BB5\uFF0C\u8FD9\u662F\u5E94\u7528\u5BF9\u5E94\u7684\u4E3B\u673A\u5217\u8868\u6240\u4E0D\u5B58\u5728\u7684\u503C\uFF0C\u901A\u5E38\u5E94\u7528\u5E94\u8BE5\u53EA\u8FD4\u56DE\u4E3B\u673A\u5217\u8868\uFF0C\u6240\u4EE5\u4E0B\u8FB9\u5BF9\u6B64\u5904\u505A\u4E86\u7B80\u5355\u7684\u6539\u9020\uFF0C\u5229\u7528\u5217\u8868\u7684<code>plus</code>\u53C2\u6570\uFF0C\u5C06ALL\u5B57\u6BB5\u6DFB\u52A0\u4E0A\u53BB\u3002</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token function">parameters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;ChoiceParameter&#39;</span><span class="token punctuation">,</span> filterLength<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> filterable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> randomName<span class="token punctuation">:</span> <span class="token string">&#39;choice-parameter-18463792817640626&#39;</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">&#39;HOST&#39;</span><span class="token punctuation">,</span> choiceType<span class="token punctuation">:</span> <span class="token string">&#39;PT_SINGLE_SELECT&#39;</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">&#39;\u9009\u62E9\u8981\u90E8\u7F72\u7684\u4E3B\u673A&#39;</span><span class="token punctuation">,</span>
    script<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;GroovyScript&#39;</span><span class="token punctuation">,</span>
        fallbackScript<span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sandbox<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> script<span class="token punctuation">:</span> <span class="token string">&#39;return[\\&#39;error\\&#39;]&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        script<span class="token punctuation">:</span> <span class="token punctuation">[</span> classpath<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sandbox<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        script<span class="token punctuation">:</span><span class="token string">&#39;&#39;&#39;import hudson.model.*
def getHostList(jobName,jobEnv) {
    def url = new URL(&quot;http://10.6.6.66:66/\${jobName}/\${jobEnv}?token=abcdefg&quot;)
    def parsedJSON = parseJSON(url.getText())
    return parsedJSON.host
}
def parseJSON(json) {
    return new groovy.json.JsonSlurperClassic().parseText(json)
}
def getProjetName(name) {
    def B = name.tokenize(&#39;-&#39;)
    B.remove(0)
    return B.join(&#39;-&#39;)
}

def jobName = Thread.currentThread().toString().split(&#39;job&#39;)[-1].replace(&#39;/&#39;,&#39;&#39;)
def htmp = [&quot;ALL&quot;]
return htmp.plus(getHostList(getProjetName(jobName),jobName.tokenize(&#39;-&#39;)[0]))
&#39;&#39;&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

pipeline<span class="token punctuation">{</span>
    agent any
    environment <span class="token punctuation">{</span>
        <span class="token comment">// \u5B9A\u4E49\u4E3B\u673Ahosts\u6587\u4EF6\uFF0C\u4E00\u822C\u4E0D\u7528\u66F4\u6539</span>
        ANSIBLE_HOSTS<span class="token operator">=</span><span class="token string gstring">&quot;<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>WORKSPACE<span class="token punctuation">}</span></span>/<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>env<span class="token punctuation">.</span>JOB_BASE_NAME<span class="token punctuation">}</span></span>_hosts&quot;</span>
    <span class="token punctuation">}</span>
    stages<span class="token punctuation">{</span>
        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#39;\u521D\u59CB\u5316\u4E3B\u673A\u5217\u8868&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            steps<span class="token punctuation">{</span>
                script<span class="token punctuation">{</span>
                    println env<span class="token punctuation">.</span>HOST
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8BE5\u65B9\u6CD5\u5B9E\u73B0\u4E86\u5F80\u6587\u4EF6\u5185\u8FFD\u52A0\u5185\u5BB9\u7684\u529F\u80FD</span>
<span class="token keyword">def</span> <span class="token function">appendFile</span><span class="token punctuation">(</span>String fileFullPath<span class="token punctuation">,</span> String line<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fileExists</span><span class="token punctuation">(</span>fileFullPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        current <span class="token operator">=</span> readFile fileFullPath
    <span class="token punctuation">}</span>
    writeFile file<span class="token punctuation">:</span> fileFullPath<span class="token punctuation">,</span> text<span class="token punctuation">:</span> current <span class="token operator">+</span> line <span class="token operator">+</span> <span class="token string gstring">&quot;\\n&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">getProjetName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">def</span> B <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
    B<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> B<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div>`,4);function la(ua,ia){const a=e("ExternalLinkIcon");return o(),c(l,null,[r,n("p",null,[k,n("a",b,[d,t(a)]),m]),n("p",null,[h,n("a",_,[g,t(a)]),f]),v,y,n("p",null,[S,n("a",j,[w,t(a)]),q,n("a",x,[N,t(a)]),L]),E,n("p",null,[O,n("a",T,[B,t(a)]),J,A,C]),P,n("p",null,[H,n("a",F,[I,t(a)]),$]),M,n("ul",null,[n("li",null,[n("a",R,[D,t(a)]),G]),n("li",null,[n("a",U,[V,t(a)]),z]),n("li",null,[n("a",K,[W,t(a)]),Y])]),n("p",null,[Q,X,Z,n("a",nn,[sn,t(a)]),an]),tn,n("p",null,[pn,n("a",en,[on,t(a)]),cn]),ln,n("p",null,[un,n("a",rn,[kn,t(a)]),bn,dn,mn]),hn,n("blockquote",null,[_n,n("ul",null,[gn,fn,n("li",null,[vn,n("p",null,[yn,n("a",Sn,[jn,t(a)]),wn]),qn,n("p",null,[xn,n("a",Nn,[Ln,t(a)]),En,On,Tn])]),Bn,n("li",null,[n("p",null,[Jn,n("a",An,[Cn,t(a)]),Pn,n("a",Hn,[Fn,t(a)]),In,n("a",$n,[Mn,t(a)]),Rn]),Dn,n("p",null,[Gn,n("a",Un,[Vn,t(a)]),zn]),Kn])])]),Wn,Yn,Qn,Xn,n("p",null,[Zn,n("a",ns,[ss,t(a)]),as,n("a",ts,[ps,t(a)]),es]),n("p",null,[os,n("a",cs,[ls,t(a)]),us,n("a",is,[rs,t(a)]),ks]),bs,n("p",null,[ds,n("a",ms,[hs,t(a)]),_s]),gs,n("blockquote",null,[fs,n("ul",null,[n("li",null,[vs,ys,n("a",Ss,[js,t(a)]),ws]),n("li",null,[qs,xs,n("a",Ns,[Ls,t(a)]),Es]),n("li",null,[Os,Ts,n("a",Bs,[Js,t(a)]),As]),Cs,Ps])]),Hs,n("p",null,[Fs,n("a",Is,[$s,t(a)]),Ms]),Rs,n("ul",null,[n("li",null,[n("a",Ds,[Gs,t(a)])]),n("li",null,[n("a",Us,[Vs,t(a)])]),n("li",null,[n("a",zs,[Ks,t(a)])]),n("li",null,[n("a",Ws,[Ys,t(a)])]),n("li",null,[n("a",Qs,[Xs,t(a)])]),n("li",null,[n("a",Zs,[na,t(a)])]),n("li",null,[n("a",sa,[aa,t(a)])]),n("li",null,[n("a",ta,[pa,t(a)])]),n("li",null,[n("a",ea,[oa,t(a)])])]),ca],64)}var ba=u(i,[["render",la]]);export{ba as default};

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.29">
    <link rel="icon" href="/img/memo-favicon.ico"><title>使用docker部署Jenkins及初始配置 | Memo</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="modulepreload" href="./assets/app.dbf5d933.js"><link rel="modulepreload" href="./assets/701.html.86efc509.js"><link rel="modulepreload" href="./assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="./assets/701.html.e32f0b3b.js">
    <link rel="stylesheet" href="./assets/style.9ca9d938.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/./pages/" class=""><!----><span class="site-name can-hide">Memo</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/./" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="专题"><span class="title">专题</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="专题"><span class="title">专题</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./topic/pages/2351.html" class="nav-link" aria-label="ELK"><!--[--><!--]--> ELK <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/1742.html" class="nav-link" aria-label="K8S"><!--[--><!--]--> K8S <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/45c5da/" class="nav-link" aria-label="Nexus"><!--[--><!--]--> Nexus <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/2415.html" class="nav-link" aria-label="Jenkins"><!--[--><!--]--> Jenkins <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/220101204130/" class="nav-link" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/22020104155458/" class="nav-link" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="周刊"><span class="title">周刊</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="周刊"><span class="title">周刊</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./weekly/pages/11c668/" class="nav-link" aria-label="2021"><!--[--><!--]--> 2021 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./weekly/pages/220103181312/" class="nav-link" aria-label="2022"><!--[--><!--]--> 2022 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="编程"><span class="title">编程</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="编程"><span class="title">编程</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./code/pages/aeab08/" class="nav-link" aria-label="Golang"><!--[--><!--]--> Golang <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./code/pages/5164.html" class="nav-link" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./code/pages/531.html" class="nav-link" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="运维"><span class="title">运维</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="运维"><span class="title">运维</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./ops/pages/027a17/" class="nav-link" aria-label="最佳实践"><!--[--><!--]--> 最佳实践 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/29.html" class="nav-link" aria-label="迎刃而解"><!--[--><!--]--> 迎刃而解 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/930.html" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/2782.html" class="nav-link" aria-label="Php"><!--[--><!--]--> Php <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/596.html" class="nav-link" aria-label="Zabbix"><!--[--><!--]--> Zabbix <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/2468.html" class="nav-link" aria-label="Prometheus"><!--[--><!--]--> Prometheus <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/5380.html" class="nav-link" aria-label="Grafana"><!--[--><!--]--> Grafana <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/5279.html" class="nav-link" aria-label="CentOS"><!--[--><!--]--> CentOS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/1847.html" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/5173.html" class="nav-link" aria-label="Ansible"><!--[--><!--]--> Ansible <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/3410.html" class="nav-link" aria-label="Ldap"><!--[--><!--]--> Ldap <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/202208241125/" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/2951.html" class="nav-link" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/202209081510" class="nav-link" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/4050.html" class="nav-link" aria-label="Etcd"><!--[--><!--]--> Etcd <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/285.html" class="nav-link" aria-label="Other"><!--[--><!--]--> Other <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="博客"><span class="title">博客</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="博客"><span class="title">博客</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./blog/pages/211229105530.html" class="nav-link" aria-label="博客相关"><!--[--><!--]--> 博客相关 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/eryajf/eryajf.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/./" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="专题"><span class="title">专题</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="专题"><span class="title">专题</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./topic/pages/2351.html" class="nav-link" aria-label="ELK"><!--[--><!--]--> ELK <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/1742.html" class="nav-link" aria-label="K8S"><!--[--><!--]--> K8S <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/45c5da/" class="nav-link" aria-label="Nexus"><!--[--><!--]--> Nexus <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/2415.html" class="nav-link" aria-label="Jenkins"><!--[--><!--]--> Jenkins <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/220101204130/" class="nav-link" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./topic/pages/22020104155458/" class="nav-link" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="周刊"><span class="title">周刊</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="周刊"><span class="title">周刊</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./weekly/pages/11c668/" class="nav-link" aria-label="2021"><!--[--><!--]--> 2021 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./weekly/pages/220103181312/" class="nav-link" aria-label="2022"><!--[--><!--]--> 2022 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="编程"><span class="title">编程</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="编程"><span class="title">编程</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./code/pages/aeab08/" class="nav-link" aria-label="Golang"><!--[--><!--]--> Golang <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./code/pages/5164.html" class="nav-link" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./code/pages/531.html" class="nav-link" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="运维"><span class="title">运维</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="运维"><span class="title">运维</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./ops/pages/027a17/" class="nav-link" aria-label="最佳实践"><!--[--><!--]--> 最佳实践 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/29.html" class="nav-link" aria-label="迎刃而解"><!--[--><!--]--> 迎刃而解 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/930.html" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/2782.html" class="nav-link" aria-label="Php"><!--[--><!--]--> Php <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/596.html" class="nav-link" aria-label="Zabbix"><!--[--><!--]--> Zabbix <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/2468.html" class="nav-link" aria-label="Prometheus"><!--[--><!--]--> Prometheus <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/5380.html" class="nav-link" aria-label="Grafana"><!--[--><!--]--> Grafana <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/5279.html" class="nav-link" aria-label="CentOS"><!--[--><!--]--> CentOS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/1847.html" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/5173.html" class="nav-link" aria-label="Ansible"><!--[--><!--]--> Ansible <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/3410.html" class="nav-link" aria-label="Ldap"><!--[--><!--]--> Ldap <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/202208241125/" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/2951.html" class="nav-link" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/202209081510" class="nav-link" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/4050.html" class="nav-link" aria-label="Etcd"><!--[--><!--]--> Etcd <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/./ops/pages/285.html" class="nav-link" aria-label="Other"><!--[--><!--]--> Other <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="博客"><span class="title">博客</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="博客"><span class="title">博客</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/./blog/pages/211229105530.html" class="nav-link" aria-label="博客相关"><!--[--><!--]--> 博客相关 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/eryajf/eryajf.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><p>注：本文章根据网上飞翔分享的文档整理。</p><p>关于docker的安装部署，这里暂先略掉。</p><h2 id="_1-先下载jenkins的镜像。" tabindex="-1"><a class="header-anchor" href="#_1-先下载jenkins的镜像。" aria-hidden="true">#</a> 1，先下载Jenkins的镜像。</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token variable">$docker</span> pull jenkinsci/blueocean
Using default tag: latest
latest: Pulling from jenkinsci/blueocean
ff3a5c916c92: Pull complete
5de5f69f42d7: Pull complete
fd869c8b9b59: Pull complete
09b77ebbb585: Pull complete
edaab8c638eb: Pull complete
74718d164167: Pull complete
6d6dab0396d5: Pull complete
f6a4487e3af7: Pull complete
4b44a66deffd: Pull complete
925e68272890: Pull complete
428de9991230: Pull complete
f4b1af398075: Pull complete
425d68489478: Pull complete
e2f8bb400606: Pull complete
251d043c8226: Pull complete
9a6a8fe90c4f: Downloading <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span>    <span class="token punctuation">]</span>  <span class="token number">62</span>.19MB/66.73MB
9a6a8fe90c4f: Pull complete
Digest: sha256:df6669eab61f76cba7b51847ef24623f65902499925b4d5a2516d155dc95c0c5
Status: Downloaded newer image <span class="token keyword">for</span> jenkinsci/blueocean:latest
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_2-查看镜像。" tabindex="-1"><a class="header-anchor" href="#_2-查看镜像。" aria-hidden="true">#</a> 2，查看镜像。</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token variable">$docker</span> images
REPOSITORY           TAG             IMAGE ID            CREATED             SIZE
jenkinsci/blueocean  latest          52e299133c9c        <span class="token number">20</span> hours ago        438MB
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-将镜像启动成容器。" tabindex="-1"><a class="header-anchor" href="#_3-将镜像启动成容器。" aria-hidden="true">#</a> 3，将镜像启动成容器。</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker run -d  <span class="token punctuation">\</span>
--name jk -u root <span class="token punctuation">\</span>
-p <span class="token number">9090</span>:8080  <span class="token punctuation">\</span>
-v /var/jenkins_home:/var/jenkins_home  <span class="token punctuation">\</span>
jenkinsci/blueocean
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>说明：</p><blockquote><ul><li>1，–name 是指定生成的容器名称。</li><li>2，最好使用root启动，以免有权限问题而启动失败。</li><li>3，-p是端口的映射，冒号前边是宿主机的端口，冒号后边的是容器的端口。</li><li>4，-v将Jenkins容器的Jenkins_home映射到宿主机的目录中，实现数据持续化。</li></ul></blockquote><h2 id="_4-查看启动的容器。" tabindex="-1"><a class="header-anchor" href="#_4-查看启动的容器。" aria-hidden="true">#</a> 4，查看启动的容器。</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token variable">$docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                               NAMES
19e670dc09b0        jenkinsci/blueocean   <span class="token string">&quot;/sbin/tini -- /usr/…&quot;</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">3</span> seconds        <span class="token number">50000</span>/tcp, <span class="token number">0.0</span>.0.0:9090-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp   jenkins
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>启动之后就可以直接通过宿主机ip+映射的端口进行访问了。</p><h2 id="_5-初入jenkins。" tabindex="-1"><a class="header-anchor" href="#_5-初入jenkins。" aria-hidden="true">#</a> 5，初入Jenkins。</h2><p>注意刚进入之后会有一个坑。</p><p><img src="http://t.eryajf.net/imgs/2021/09/c902710b00a7750f.jpg" alt="image"></p><p>这里看到指定了一个路径，去到var下去找，但是这个目录下并没有这个目录，可能这是镜像默认的一个路径，但是事实却并非如此。</p><p>那么我们就要用一下find 大法了（其实在/var/lib/docker/volumes/c727610d35c19516dc279ffb9cc8ef68a3ff9e8ef4798a4e2730a1223f22d372/secrets/initialAdminPassword之中。）。</p><p><img src="http://t.eryajf.net/imgs/2021/09/48b197e8e245c58e.jpg" alt="image"></p><p>这里是我之前起了几次容器才会有多个文件，根据时间判断是哪个就行了。</p><p>接下来去到容器当中看看。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost mnt<span class="token punctuation">]</span><span class="token variable">$docker</span> <span class="token builtin class-name">exec</span> -it jk <span class="token function">bash</span>
bash-4.4<span class="token comment">#</span>
bash-4.4<span class="token comment"># ls</span>
bin  etc   lib	  mnt	root  sbin  sys  usr
dev  home  media  proc	run   srv   tmp  var
bash-4.4<span class="token comment">#</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>注意这里容器中使用apk命令来管理应用的安装配置，类似于系统中的yum命令。</code></p><p>先来查看一下apk命令的用法。</p><details class="custom-container details"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>bash-4.4<span class="token comment"># apk -h</span>
apk-tools <span class="token number">2.8</span>.2, compiled <span class="token keyword">for</span> x86_64.
usage: apk COMMAND <span class="token punctuation">[</span>-h<span class="token operator">|</span>--help<span class="token punctuation">]</span> <span class="token punctuation">[</span>-p<span class="token operator">|</span>--root DIR<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>-X<span class="token operator">|</span>--repository REPO<span class="token punctuation">]</span> <span class="token punctuation">[</span>-q<span class="token operator">|</span>--quiet<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>-v<span class="token operator">|</span>--verbose<span class="token punctuation">]</span> <span class="token punctuation">[</span>-i<span class="token operator">|</span>--interactive<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>-V<span class="token operator">|</span>--version<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f<span class="token operator">|</span>--force<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--force-binary-stdout<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--force-broken-world<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--force-non-repository<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--force-old-apk<span class="token punctuation">]</span> <span class="token punctuation">[</span>--force-overwrite<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--force-refresh<span class="token punctuation">]</span> <span class="token punctuation">[</span>-U<span class="token operator">|</span>--update-cache<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--progress<span class="token punctuation">]</span> <span class="token punctuation">[</span>--progress-fd FD<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--no-progress<span class="token punctuation">]</span> <span class="token punctuation">[</span>--purge<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--allow-untrusted<span class="token punctuation">]</span> <span class="token punctuation">[</span>--wait TIME<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--keys-dir KEYSDIR<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--repositories-file REPOFILE<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--no-network<span class="token punctuation">]</span> <span class="token punctuation">[</span>--no-cache<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--cache-dir CACHEDIR<span class="token punctuation">]</span> <span class="token punctuation">[</span>--arch ARCH<span class="token punctuation">]</span>
           <span class="token punctuation">[</span>--print-arch<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARGS<span class="token punctuation">]</span><span class="token punctuation">..</span>.
 
The following commands are available:
  <span class="token function">add</span>       Add PACKAGEs to <span class="token string">&#39;world&#39;</span> and <span class="token function">install</span>
            <span class="token punctuation">(</span>or upgrade<span class="token punctuation">)</span> them, <span class="token keyword">while</span> ensuring
            that all dependencies are met
  del       Remove PACKAGEs from <span class="token string">&#39;world&#39;</span> and
            uninstall them
  fix       Repair package or upgrade it without
            modifying main dependencies
  update    Update repository indexes from all
            remote repositories
  info      Give detailed information about
            PACKAGEs or repositories
  search    Search package by PATTERNs or by
            indexed dependencies
  upgrade   Upgrade currently installed packages
            to match repositories
  cache     Download missing PACKAGEs to cache
            and/or delete unneeded files from
            cache
  version   Compare package versions <span class="token punctuation">(</span>in
            installed database vs. available<span class="token punctuation">)</span> or
            <span class="token keyword">do</span> tests on literal version strings
  index     Create repository index <span class="token function">file</span> from
            FILEs
  fetch     Download PACKAGEs from global
            repositories to a <span class="token builtin class-name">local</span> directory
  audit     Audit the directories <span class="token keyword">for</span> changes
  verify    Verify package integrity and
            signature
  dot       Generate graphviz graphs
  policy    Show repository policy <span class="token keyword">for</span> packages
  stats     Show statistics about repositories
            and installations
  manifest  Show checksums of package contents
 
Global options:
  -h, --help              Show generic <span class="token builtin class-name">help</span> or
                          applet specific <span class="token builtin class-name">help</span>
  -p, --root DIR          Install packages to DIR
  -X, --repository REPO   Use packages from REPO
  -q, --quiet             Print <span class="token function">less</span> information
  -v, --verbose           Print <span class="token function">more</span> information
                          <span class="token punctuation">(</span>can be doubled<span class="token punctuation">)</span>
  -i, --interactive       Ask confirmation <span class="token keyword">for</span>
                          certain operations
  -V, --version           Print program version
                          and <span class="token builtin class-name">exit</span>
  -f, --force             Enable selected
                          --force-* <span class="token punctuation">(</span>deprecated<span class="token punctuation">)</span>
  --force-binary-stdout   Continue even <span class="token keyword">if</span> binary
                          data is to be output
  --force-broken-world    Continue even <span class="token keyword">if</span>
                          <span class="token string">&#39;world&#39;</span> cannot be
                          satisfied
  --force-non-repository  Continue even <span class="token keyword">if</span>
                          packages may be lost on
                          <span class="token function">reboot</span>
  --force-old-apk         Continue even <span class="token keyword">if</span>
                          packages use
                          unsupported features
  --force-overwrite       Overwrite files <span class="token keyword">in</span>
                          other packages
  --force-refresh         Do not use cached files
                          <span class="token punctuation">(</span>local or from proxy<span class="token punctuation">)</span>
  -U, --update-cache      Update the repository
                          cache
  --progress              Show a progress bar
  --progress-fd FD        Write progress to fd
  --no-progress           Disable progress bar
                          even <span class="token keyword">for</span> TTYs
  --purge                 Delete also modified
                          configuration files
                          <span class="token punctuation">(</span>pkg removal<span class="token punctuation">)</span> and
                          uninstalled packages
                          from cache <span class="token punctuation">(</span>cache
                          clean<span class="token punctuation">)</span>
  --allow-untrusted       Install packages with
                          untrusted signature or
                          no signature
  --wait TIME             Wait <span class="token keyword">for</span> TIME seconds
                          to get an exclusive
                          repository lock before
                          failing
  --keys-dir KEYSDIR      Override directory of
                          trusted keys
  --repositories-file REPOFILE Override
                          repositories <span class="token function">file</span>
  --no-network            Do not use network
                          <span class="token punctuation">(</span>cache is still used<span class="token punctuation">)</span>
  --no-cache              Do not use any <span class="token builtin class-name">local</span>
                          cache path
  --cache-dir CACHEDIR    Override cache
                          directory
  --arch ARCH             Use architecture with
                          --root
  --print-arch            Print default arch and
                          <span class="token builtin class-name">exit</span>
 
This apk has coffee making abilities.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br></div></div></details><h2 id="_6-基础软件安装。" tabindex="-1"><a class="header-anchor" href="#_6-基础软件安装。" aria-hidden="true">#</a> 6，基础软件安装。</h2><p>接下来操作一波安装一些常用的工具。</p><h3 id="_1-maven。" tabindex="-1"><a class="header-anchor" href="#_1-maven。" aria-hidden="true">#</a> 1，maven。</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>bash-4.4<span class="token comment"># apk add maven</span>
OK: <span class="token number">402</span> MiB <span class="token keyword">in</span> <span class="token number">107</span> packages
bash-4.4<span class="token comment"># apk search ansible</span>
ansible-2.4.1.0-r0
ansible-doc-2.4.1.0-r0
bash-4.4<span class="token comment"># apk add ansible</span>
OK: <span class="token number">402</span> MiB <span class="token keyword">in</span> <span class="token number">107</span> packages
bash-4.4<span class="token comment"># apk add ansible-doc</span>
OK: <span class="token number">402</span> MiB <span class="token keyword">in</span> <span class="token number">107</span> packages
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>接着查看一下这些工具在容器中是安在了什么地方。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>bash-4.4<span class="token comment"># apk info -L maven</span>
maven-3.5.2-r0 contains:
etc/mavenrc
usr/bin/mvnDebug
usr/bin/mvn
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-git。" tabindex="-1"><a class="header-anchor" href="#_2-git。" aria-hidden="true">#</a> 2，git。</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>bash-4.4<span class="token comment"># apk info -L git</span>
usr/bin/git
usr/bin/git-upload-pack
usr/bin/git-receive-pack
usr/bin/git-upload-archive
usr/bin/git-shell
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-jdk。" tabindex="-1"><a class="header-anchor" href="#_3-jdk。" aria-hidden="true">#</a> 3，jdk。</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>bash-4.4<span class="token comment"># echo $JAVA_HOME</span>
/usr/lib/jvm/java-1.8-openjdk
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_7-jenkins中的基础配置。" tabindex="-1"><a class="header-anchor" href="#_7-jenkins中的基础配置。" aria-hidden="true">#</a> 7，Jenkins中的基础配置。</h2><p>现在进行基础的配置，包括插件安装，环境变量的配置等。</p><p>插件有：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>git	
gitlab	可以配置与gitlab的连接。
Publish Over SSH	使用ssh的方式与remote服务器进行交互，之前一直使用命令代劳一切了，这次采用一下系统的插件。
docker
ansible
Monitoring	监控Jenkins所消耗的系统资源。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>插件安装不做过多介绍。</p><p>我们来到系统设置–》全局工具配置页面。</p><p>依然是一些工具的配置。</p><p>刚才已经全部看过了，，现在配置如下。</p><p><img src="http://t.eryajf.net/imgs/2021/09/dd61b6a41087807c.jpg" alt="image"></p><p><img src="http://t.eryajf.net/imgs/2021/09/6f41d18d34ddc37f.jpg" alt="image"></p><p>上边都是一些基本工作，必须要做的，不然下边的事儿都免谈了。</p><p>接下来的操作则是完全利用Jenkins中的工具，把免秘钥工作的事儿给干了。我们来看下如何配置的。</p><p>首先在容器当中生成密钥对。</p><p>然后来到Jenkins中先将容器自己的私钥放进来。</p><p>在初始界面点击 <code>Credentials</code> 添加证书。</p><p><img src="http://t.eryajf.net/imgs/2021/09/c53fc55953f932bd.jpg" alt="image"></p><p>这个时候去容器中复制好刚生成的私钥，等下要用。</p><p><img src="http://t.eryajf.net/imgs/2021/09/f3c2263f40d638cc.jpg" alt="image"></p><p>对圈起来的地方进行配置。然后点击ok。就把Jenkins本机的私钥添加进去了，随后只要我们把Jenkins公钥放入其他地方（或者是服务器，或者是其他地方），就可以直接进行使用这个配置好的证书进行登陆了。</p><p>然后进入到系统配置，配置出容器中的Jenkins与远程服务器宿主机的信息，不要着急，这个地方的配置，会在等会儿用得到。</p><p><img src="http://t.eryajf.net/imgs/2021/09/a8b8575fc9ffb1b5.jpg" alt="image"></p><p>以上简单表述了一下Jenkins通过docker部署之后的一些简单配置过程。接下来也会开启docker时代，都以docker为基准进行更多功能的配置以及扩展。</p><p>就像日新月异的技术一样的，我们自己所掌握的，也应该是日日新的。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/eryajf/eryajf.github.io/edit/main/02.系列专题/05.Jenkins系列文章/18.使用docker部署Jenkins及初始配置.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: fengxuechao@tal.com">fengxuechao</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="./assets/app.dbf5d933.js" defer></script>
  </body>
</html>
